(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dcc9285a"],{"030c":function(e,t,a){},3846:function(e,t,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"389f":function(e,t,a){"use strict";var n=a("030c"),s=a.n(n);s.a},"4ff6":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addContact"},[a("div",{staticClass:"container"},[a("van-cell-group",[a("van-field",{attrs:{label:"姓名",type:"text","input-align":"right",placeholder:"请输入联系人姓名（必填）",error:!1,readonly:1==e.openType},model:{value:e.user.contactsName,callback:function(t){e.$set(e.user,"contactsName",t)},expression:"user.contactsName"}}),a("van-field",{attrs:{label:"对应客户",type:"text","input-align":"right",placeholder:"请输入客户（必填）",error:!1,readonly:!0},model:{value:e.user.companyName,callback:function(t){e.$set(e.user,"companyName",t)},expression:"user.companyName"}}),a("van-field",{attrs:{label:"职务",type:"text","input-align":"right",placeholder:"请输入联系人职务（选填）",readonly:1==e.openType},model:{value:e.user.contactsPost,callback:function(t){e.$set(e.user,"contactsPost",t)},expression:"user.contactsPost"}}),a("van-field",{attrs:{label:"手机",type:"text","input-align":"right",placeholder:"请输入联系人手机（11位纯数字）",readonly:1==e.openType},model:{value:e.user.contactsMoblie,callback:function(t){e.$set(e.user,"contactsMoblie",t)},expression:"user.contactsMoblie"}}),a("van-field",{attrs:{label:"客户UID",type:"text","input-align":"right",placeholder:"点击选择 注意:请单选",readonly:!0},on:{click:e.getUserId},model:{value:e.user.externalContactIds,callback:function(t){e.$set(e.user,"externalContactIds",t)},expression:"user.externalContactIds"}}),a("div",{staticClass:"select-list"},[a("div",{staticClass:"list",class:{addborder:e.showMoreBox}},[a("div",{staticClass:"left"},[e._v("\n            联络人标识\n          ")]),a("div",{staticClass:"right"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.user.contactsIdentification,expression:"user.contactsIdentification"},{name:"placeholder",rawName:"v-placeholder",value:{color:e.user.contactsIdentification},expression:"{color: user.contactsIdentification}"}],attrs:{disabled:1==e.$route.query.openType},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.user,"contactsIdentification",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("\n                请选择\n              ")]),a("option",{attrs:{value:"第一联络人"}},[e._v("\n                第一联络人\n              ")]),a("option",{attrs:{value:"第二联络人"}},[e._v("\n                第二联络人\n              ")])])]),a("div",{directives:[{name:"sanjiao",rawName:"v-sanjiao",value:{color:e.user.contactsIdentification},expression:"{color: user.contactsIdentification}"}],staticClass:"saojiao"})])]),a("div",{staticClass:"select-list"},[a("div",{staticClass:"list",class:{addborder:e.showMoreBox}},[a("div",{staticClass:"left"},[e._v("\n            性别\n          ")]),a("div",{staticClass:"right"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.user.contactsSex,expression:"user.contactsSex"}],attrs:{disabled:1==e.$route.query.openType},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.user,"contactsSex",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"请选择"}},[e._v("\n                请选择\n              ")]),a("option",{attrs:{value:"男"}},[e._v("\n                男\n              ")]),a("option",{attrs:{value:"女"}},[e._v("\n                女\n              ")])])]),a("div",{directives:[{name:"sanjiao",rawName:"v-sanjiao",value:{color:e.user.contactsSex},expression:"{color: user.contactsSex}"}],staticClass:"saojiao"})])]),e.showMoreBox||1==e.openType?a("div",[a("van-field",{attrs:{label:"固定电话",type:"text","input-align":"right",placeholder:"区号-电话号码-分机号",readonly:1==e.openType},model:{value:e.user.contactsFixedTelephone,callback:function(t){e.$set(e.user,"contactsFixedTelephone",t)},expression:"user.contactsFixedTelephone"}}),a("van-field",{attrs:{label:"邮箱",type:"text","input-align":"right",placeholder:"请输入邮箱号",readonly:1==e.openType},model:{value:e.user.contactsEmail,callback:function(t){e.$set(e.user,"contactsEmail",t)},expression:"user.contactsEmail"}}),a("van-field",{attrs:{label:"QQ",type:"text","input-align":"right",placeholder:"请输入联系人QQ",readonly:1==e.openType},model:{value:e.user.contactsQq,callback:function(t){e.$set(e.user,"contactsQq",t)},expression:"user.contactsQq"}}),a("div",{staticClass:"select-list"},[a("div",{staticClass:"list addborder",on:{click:function(t){return e.startTimeClick()}}},[a("div",{staticClass:"left"},[e._v("\n              出生年月\n            ")]),a("div",{staticClass:"right",class:{selectPlaceholder:""==e.user.contactsBirth}},[e._v("\n              "+e._s(""==e.user.contactsBirth?"请选择":e.user.contactsBirth)+"\n            ")]),a("div",{staticClass:"timeBox"},[a("span",{staticClass:"iconfont iconrili",staticStyle:{color:"#aebab4"}})])])]),a("van-field",{attrs:{label:"地址",type:"text","input-align":"right",placeholder:"请输入联系人联络地址",readonly:1==e.openType},model:{value:e.user.contactsAdress,callback:function(t){e.$set(e.user,"contactsAdress",t)},expression:"user.contactsAdress"}}),a("van-field",{attrs:{label:"喜好",type:"text","input-align":"right",placeholder:"请输入",readonly:1==e.openType},model:{value:e.user.contactsLike,callback:function(t){e.$set(e.user,"contactsLike",t)},expression:"user.contactsLike"}}),a("van-field",{attrs:{label:"备注",type:"text",autosize:"","input-align":"right",placeholder:"请输入备注信息",readonly:1==e.openType},model:{value:e.user.contactsRemark,callback:function(t){e.$set(e.user,"contactsRemark",t)},expression:"user.contactsRemark"}})],1):e._e()],1),e.showMoreBox||1==e.openType?e._e():a("div",{staticClass:"show-more",on:{click:function(t){return e.showMore()}}},[a("span",[e._v("展开更多")]),e.showMoreBox&&2!=e.openType&&1!=e.openType?e._e():a("van-icon",{staticStyle:{position:"relative",top:"2px"},attrs:{name:"arrow-down"}})],1),a("div",{staticClass:"footer"},[2==e.openType||3==e.openType?a("van-button",{staticClass:"gradual-btn",staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.addBut}},[e._v("\n        保存\n      ")]):e._e()],1)],1),a("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:e.selectStartTime,callback:function(t){e.selectStartTime=t},expression:"selectStartTime"}},[a("van-datetime-picker",{attrs:{type:"date","max-date":e.maxDate,"min-date":e.minDate,formatter:e.formatter},on:{confirm:function(t){return e.startconfirm(t)},cancel:function(t){return e.startconfirm()}},model:{value:e.currentTime,callback:function(t){e.currentTime=t},expression:"currentTime"}})],1)],1)},s=[],o=(a("28a5"),a("6b54"),a("5217")),c=a("ed08"),i={name:"AddContact",data:function(){return{showMoreBox:!1,selectStartTime:!1,contactsBirth:"",maxDate:new Date,minDate:new Date(1900,1,1),currentTime:new Date,userName:"",companyName:"",duty:"",mobile:"",sex:"请选择",contactNumber:-1,user:{companyName:this.$store.getters.userData.companyName,contactsName:"",contactsPost:"",contactsMoblie:"",contactsEmail:"",contactsSex:"",contactsBirth:"",contactsQq:"",contactsLike:"",contactsAdress:"",contactsRemark:"",externalContactIds:"",contactsFixedTelephone:""},openType:2}},computed:{},watch:{},created:function(){this.openType=this.$route.query.openType||3,this.$route.query.id&&this.getOpenUser(this.$route.query.id)},methods:{getUserId:function(){var e=this,t="";wx.invoke("selectExternalContact",{filterType:0,mode:"single",type:["user"]},function(a){console.log("表示展示全部外部联系人列表",a),"selectExternalContact:ok"==a.err_msg&&(t=a.userIds.toString(";"),e.user.externalContactIds=t)})},getOpenUser:function(e){var t=this;Object(o["f"])({id:e}).then(function(e){e.data.lendingItem&&(e.data.lendingItem.createTime=new Date(e.data.lendingItem.createTime),e.data.lendingItem.createTime=Object(c["d"])(e.data.lendingItem.createTime,"yy-MM-dd"),e.data.lendingItemList&&e.data.lendingItemList.map(function(e){e.createTime=new Date(e.createTime),e.createTime=Object(c["d"])(e.createTime,"yyyy-MM-dd")})),t.user=e.data})},formatter:function(e,t){return"".concat(t,"year"===e?"年":"month"===e?"月":"日")},showMore:function(){this.showMoreBox=!0},startTimeClick:function(){this.selectStartTime=!0},startconfirm:function(e){if(Object(c["e"])(e))this.selectStartTime=!1;else{var t=Object(c["d"])(new Date(e),"yyyy-MM-dd","special"),a=t.split("-");this.user.contactsBirth="".concat(a[0],"-").concat(a[1],"-").concat(a[2]),this.selectStartTime=!1}},addBut:function(){var e={contactsPost:"职务",contactsName:"姓名"},t=this.user;this.$checkFrom(t,e)&&(Object(c["c"])(t.contactsMoblie)?2==this.openType?this.updated():this.createUsered():this.$notify("请确认第一联络人手机号码"))},createUsered:function(){var e=this,t=this.user;Object(o["k"])(t).then(function(t){e.$Clog(t),e.$notifySty("操作成功"),e.$router.go(-1)})},updated:function(){var e=this,t=this.user;this.$checkFrom(t)&&Object(o["y"])(t).then(function(t){e.$Clog(t),e.$notifySty("操作成功"),e.$router.go(-1)})}}},r=i,l=(a("389f"),a("2877")),u=Object(l["a"])(r,n,s,!1,null,"353d30fe",null);t["default"]=u.exports},"6b54":function(e,t,a){"use strict";a("3846");var n=a("cb7c"),s=a("0bfb"),o=a("9e1e"),c="toString",i=/./[c],r=function(e){a("2aba")(RegExp.prototype,c,e,!0)};a("79e5")(function(){return"/a/b"!=i.call({source:"a",flags:"b"})})?r(function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?s.call(e):void 0)}):i.name!=c&&r(function(){return i.call(this)})}}]);
//# sourceMappingURL=chunk-dcc9285a.7c50de92.js.map