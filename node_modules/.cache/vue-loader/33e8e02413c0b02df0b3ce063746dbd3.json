{"remainingRequest":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhanyuan/code/oc-works/fuli/src/views/customerManagement/tab-creation.vue?vue&type=style&index=0&id=afa26abe&lang=less&scoped=true&","dependencies":[{"path":"/Users/wangzhanyuan/code/oc-works/fuli/src/views/customerManagement/tab-creation.vue","mtime":1564134165925},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/less-loader/dist/cjs.js","mtime":1564134317354},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.contact_container6 {\n  width: 100%;\n  padding: 10px 10px 70px 10px;\n  box-sizing: border-box;\n  background: #fcfcfc;\n  .tab6_box {\n    width: 100%;\n    .tab6-list {\n      width: 100%;\n      background: #ffffff;\n      box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.1);\n      border-radius: 5px;\n      margin-bottom: 15px;\n      position: relative;\n      .top {\n        width: 100%;\n        padding: 10px 20px;\n        box-sizing: border-box;\n      }\n      .tab6-list-tilte {\n        width: 100%;\n        height: 35px;\n        line-height: 35px;\n        margin-bottom: 15px;\n        .span1 {\n          font-size: 16px;\n          color: #333333;\n          font-weight: bold;\n          float: left;\n        }\n        .span2 {\n          font-size: 12px;\n          color: #999999;\n          float: right;\n        }\n      }\n      .tab6-list-p {\n        width: 100%;\n        height: 25px;\n        line-height: 25px;\n        font-size: 14px;\n        color: #999999;\n      }\n\n      .message {\n        width: 100%;\n        padding: 10px 15px 10px 10px;\n        box-sizing: border-box;\n        border-top: 1px dashed #dddddd;\n        display: flex;\n        position: relative;\n        .message-left {\n          width: 65%;\n          height: 20px;\n          line-height: 20px;\n          font-size: 12px;\n          color: #333333;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          min-width: 0;\n        }\n        .message-right {\n          width: 35%;\n          height: 20px;\n          min-width: 0;\n          line-height: 20px;\n          text-align: right;\n          font-size: 12px;\n          color: #333333;\n        }\n      }\n    }\n  }\n}\n.tab-footer {\n  width: 100%;\n  height: 70px;\n  background: #fcfcfc;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  padding: 0 10px;\n  box-sizing: border-box;\n}\n.messageBoard {\n  width: 240px;\n  .header {\n    width: 90%;\n    margin: 0 auto;\n    height: 40px;\n    font-size: 16px;\n    font-weight: bold;\n    line-height: 40px;\n    text-align: center;\n    border-bottom: 1px solid #dddddd;\n    position: relative;\n    .header-btn {\n      position: absolute;\n      right: 0;\n      top: 0;\n      color: #00703a;\n      font-size: 14px;\n      font-weight: normal;\n    }\n  }\n  .container {\n    width: 90%;\n    margin: 0 auto;\n    min-height: 150px;\n    .container_header {\n      width: 100%;\n      height: 35px;\n      line-height: 35px;\n      color: #626262;\n      font-size: 12px;\n    }\n    .container_p {\n      width: 100%;\n      line-height: 20px;\n      color: #333333;\n      font-size: 12px;\n    }\n    textarea {\n      width: 100%;\n      max-height: 120px;\n      min-height: 120px;\n      padding: 10px;\n      font-size: 12px;\n      box-sizing: border-box;\n      outline: none;\n      resize: none;\n      overflow-y: auto;\n    }\n    .textarea_no {\n      border: 1px solid #ff0021;\n    }\n    .textarea_yes {\n      border: 1px solid #999999;\n    }\n  }\n}\n",{"version":3,"sources":["tab-creation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"tab-creation.vue","sourceRoot":"src/views/customerManagement","sourcesContent":["<template>\n  <div name=\"creation\">\n    <div class=\"contact_container6\">\n      <div class=\"tab6_box\">\n        <div\n          v-if=\"PJList.length==0||!PJList\"\n          style=\"color: #969799;\n    font-size: 13px;\n    line-height: 50px;\n    text-align: center;\"\n        >\n          没有更多数据啦\n        </div>\n        <div\n          v-for=\"(item,idx) in PJList\"\n          :key=\"idx\"\n          class=\"tab6-list\"\n          @click=\"itemDetails(item.id)\"\n        >\n          <div class=\"top\">\n            <div class=\"tab6-list-tilte\">\n              <span class=\"span1\">{{ item.information.projectName }}</span>\n              <span class=\"span2\">{{ item.createTime }}</span>\n            </div>\n            <div class=\"tab6-list-p\">\n              承租人:{{ item.information.lessee }}\n            </div>\n            \n            <!-- <div class=\"tab6-list-p\">\n              主营项目:{{ item.information.mainBusiness }}\n            </div> -->\n            <div class=\"tab6-list-p\">\n              项目金额:{{ item.information.projectAmount }} 万元\n            </div>\n            <div class=\"tab6-list-p\">\n              资金用途:{{ item.information.useOfFunds }}\n            </div>\n            <div class=\"tab6-list-p\">\n              <span>操作人:{{ item.createUserName }}</span>\n              <span\n                v-if=\"PermissionObj['messageboard_insert'] != undefined\" \n                style=\"float:right;\"\n                class=\"iconfont iconliuyan theme-colors\"\n                @click.stop=\"addMessage(item)\"\n              />\n            </div>\n          </div>\n          <div\n            v-if=\"item.content && PermissionObj['messageboard'] != undefined\"\n            class=\"message\"\n            @click.stop=\"showMessage(item)\"\n          >\n            <div class=\"message-left\">\n              {{ item.content }}\n            </div>\n            <div\n              class=\"message-right\"\n            >\n              <span>{{ item.boaCreateTime }}</span>\n              <van-icon\n                style=\"position:relative;top:2px;\"\n                name=\"arrow\"\n              />\n            </div>\n\n            <span\n              v-if=\"!item.isRead\"\n              style=\"position:absolute;right:0;top:1px;color:#ff0021;\"\n              class=\"iconfont iconnew\"\n            />\n          </div>\n        </div>\n      </div>\n\n      <div\n        v-if=\"PermissionObj['createproject_insert'] != undefined\"\n        class=\"tab-footer\"\n      >\n        <van-button\n          class=\"gradual-btn\"\n          style=\"width:100%;\"\n          type=\"primary\"\n          to=\"/addApproval\"\n        >\n          立项\n        </van-button>\n      </div>\n    </div>\n\n    <!-- 留言板弹层 -->\n    <van-popup v-model=\"messageBoard\">\n      <div class=\"messageBoard\">\n        <div class=\"header\">\n          留言板\n        </div>\n        <div\n          v-for=\"(item,idx) in messageLists\"\n          :key=\"idx\"\n          class=\"container\"\n        >\n          <div class=\"container_header\">\n            <span style=\"float:left;\">{{ item.author }}</span>\n            <span style=\"float:right;\">{{ item.createTime }}</span>\n          </div>\n          <div class=\"container_p\">\n            {{ item.content }}\n          </div>\n        </div>\n      </div>\n    </van-popup>\n\n    <!--新增留言弹层 -->\n    <van-popup v-model=\"AddmessageBoard\">\n      <div class=\"messageBoard\">\n        <div class=\"header\">\n          留言板\n        </div>\n        <div class=\"container\">\n          <textarea\n            v-model=\"messageStr\"\n            :class=\"messageError ? 'textarea_no' :'textarea_yes'\"\n            placeholder=\"请输入留言\"\n          />\n        </div>\n        <van-row>\n          <van-col span=\"12\">\n            <van-button\n              class=\"clear-btn\"\n              style=\"width:100%;\"\n              square\n              type=\"primary\"\n              @click=\"messageClear()\"\n            >\n              取消\n            </van-button>\n          </van-col>\n          <van-col span=\"12\">\n            <van-button\n              class=\"confirm-btn\"\n              style=\"width:100%;\"\n              square\n              type=\"primary\"\n              @click=\"messageSave\"\n            >\n              确定\n            </van-button>\n          </van-col>\n        </van-row>\n      </div>\n    </van-popup>\n  </div>\n</template>\n<script>\n// import { api, get } from \"@api\";\n// import { mapState, mapMutations } from 'vuex'\nimport { projectList,messageList,addMessages } from '@/service/customer'\nimport { isNull } from '@/utils'\n\nexport default {\n  name: 'Creation',\n  data() {\n    return {\n       PermissionObj:this.$store.state.powerList.PermissionObj,///权限\n      messageBoard: false,\n      AddmessageBoard: false,\n      messageStr: '',\n      messageError: false,\n      PJList:[],\n      setContent:'',\n      messageLists:[],\n    }\n  },\n  computed: {},\n  created() {\n    this.getProjectList()\n  },\n  methods: {\n    \n    getProjectList() {\n      const params = {\n        menuType: 1,\n        size:1000\n      }\n      projectList(params).then((res) => {\n        console.log('projectList', res)\n        this.PJList = res.data\n      })\n    },\n    \n    //唤醒留言表单\n    addMessage(item) {\n      console.log('item',item)\n      this.setingItem = item\n      this.messageBoard = false\n      setTimeout(() => {\n        // 加载状态结束\n        this.AddmessageBoard = true\n      }, 300)\n    },\n    //展示留言\n    showMessage(item){\n      this.messageBoard = !this.messageBoard\n      this.setingMessage = item\n      item.isRead = true\n      this.getMessageList(item)\n    },\n    //获取留言列表\n    getMessageList(item){\n      console.log('获取留言列表',item)\n      let params = {\n        eventType:5,\n        eventId:item.id,\n        messageId:item.messageId,\n      }\n      messageList(params).then(res=>{\n        this.messageLists = res.data || []\n        console.log('获取留言',res)\n      })\n    },\n    //新增留言\n    setMessage(){      \n      let params = {\n        author:this.$store.getters.userInfo.name,\n        authorUserId:this.$store.getters.userInfo.id,\n        eventId:this.setingItem.eventId,\n        content:this.messageStr,\n        eventType:5\n      }\n      console.log('新增留言',params)\n      addMessages(params).then(res=>{\n        console.log('获取留言',res)\n        this.messageStr = ''\n        this.messageError = false     \n        this.AddmessageBoard = false\n        this.getInit()\n        this.getProjectList()\n      })\n    },\n    getInit(){\n      this.page=1\n      this.pageLog = 1\n      this.PJList = []\n      this.totalLog = null\n      this.total = null\n    },\n    // 留言板取消事件\n    messageClear() {      \n      this.AddmessageBoard = false\n      this.messageStr = ''\n    },\n    // 留言保存事件\n    messageSave() {\n      console.log('留言保存事件',this.messageStr)\n      this.setMessage()\n      if (isNull(this.messageStr)) {\n        this.messageError = true\n        return\n      }      \n    },\n    //事件详情\n    itemDetails(id){\n      this.$router.push({\n        path:'/addApproval',\n        query:{\n          id,\n        }\n      })\n    }\n  },\n}\n</script>\n<style lang=\"less\" scoped>\n.contact_container6 {\n  width: 100%;\n  padding: 10px 10px 70px 10px;\n  box-sizing: border-box;\n  background: #fcfcfc;\n  .tab6_box {\n    width: 100%;\n    .tab6-list {\n      width: 100%;\n      background: #ffffff;\n      box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.1);\n      border-radius: 5px;\n      margin-bottom: 15px;\n      position: relative;\n      .top {\n        width: 100%;\n        padding: 10px 20px;\n        box-sizing: border-box;\n      }\n      .tab6-list-tilte {\n        width: 100%;\n        height: 35px;\n        line-height: 35px;\n        margin-bottom: 15px;\n        .span1 {\n          font-size: 16px;\n          color: #333333;\n          font-weight: bold;\n          float: left;\n        }\n        .span2 {\n          font-size: 12px;\n          color: #999999;\n          float: right;\n        }\n      }\n      .tab6-list-p {\n        width: 100%;\n        height: 25px;\n        line-height: 25px;\n        font-size: 14px;\n        color: #999999;\n      }\n\n      .message {\n        width: 100%;\n        padding: 10px 15px 10px 10px;\n        box-sizing: border-box;\n        border-top: 1px dashed #dddddd;\n        display: flex;\n        position: relative;\n        .message-left {\n          width: 65%;\n          height: 20px;\n          line-height: 20px;\n          font-size: 12px;\n          color: #333333;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          min-width: 0;\n        }\n        .message-right {\n          width: 35%;\n          height: 20px;\n          min-width: 0;\n          line-height: 20px;\n          text-align: right;\n          font-size: 12px;\n          color: #333333;\n        }\n      }\n    }\n  }\n}\n.tab-footer {\n  width: 100%;\n  height: 70px;\n  background: #fcfcfc;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  padding: 0 10px;\n  box-sizing: border-box;\n}\n.messageBoard {\n  width: 240px;\n  .header {\n    width: 90%;\n    margin: 0 auto;\n    height: 40px;\n    font-size: 16px;\n    font-weight: bold;\n    line-height: 40px;\n    text-align: center;\n    border-bottom: 1px solid #dddddd;\n    position: relative;\n    .header-btn {\n      position: absolute;\n      right: 0;\n      top: 0;\n      color: #00703a;\n      font-size: 14px;\n      font-weight: normal;\n    }\n  }\n  .container {\n    width: 90%;\n    margin: 0 auto;\n    min-height: 150px;\n    .container_header {\n      width: 100%;\n      height: 35px;\n      line-height: 35px;\n      color: #626262;\n      font-size: 12px;\n    }\n    .container_p {\n      width: 100%;\n      line-height: 20px;\n      color: #333333;\n      font-size: 12px;\n    }\n    textarea {\n      width: 100%;\n      max-height: 120px;\n      min-height: 120px;\n      padding: 10px;\n      font-size: 12px;\n      box-sizing: border-box;\n      outline: none;\n      resize: none;\n      overflow-y: auto;\n    }\n    .textarea_no {\n      border: 1px solid #ff0021;\n    }\n    .textarea_yes {\n      border: 1px solid #999999;\n    }\n  }\n}\n</style>\n"]}]}