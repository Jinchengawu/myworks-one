{"remainingRequest":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/thread-loader/dist/cjs.js!/Users/wangzhanyuan/code/oc-works/fuli/node_modules/babel-loader/lib/index.js!/Users/wangzhanyuan/code/oc-works/fuli/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhanyuan/code/oc-works/fuli/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhanyuan/code/oc-works/fuli/src/views/addCustomer/addCustomer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhanyuan/code/oc-works/fuli/src/views/addCustomer/addCustomer.vue","mtime":1564134165921},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { insertFirm, updataFirm } from '@/service/home';\nimport { firmInfo } from '@/service/customer'; // import { mapState, Store } from 'vuex'\n\nimport { formatDate, isNull, checkPhoneNum, checkEmail } from '@/utils';\nexport default {\n  name: 'AddCustomer',\n  data: function data() {\n    return {\n      customerProfile: -1,\n      showMoreBox: false,\n      selectStartTime: false,\n      createTime: '',\n      maxDate: new Date(),\n      minDate: new Date(1900, 1, 1),\n      currentTime: new Date(),\n      // formData\n      form: {\n        companyName: '',\n        // 公司名称\n        companyAdress: '',\n        companyIndustry: '',\n        companyCreditQuota: '',\n        companyCustomerType: '',\n        companyInitialFundingRequirements: '',\n        companyUnifiedCreditCode: '',\n        companyRegisteredCapital: '',\n        companyEstablishmentTime: '',\n        companyBankAccount: '',\n        enterpriseActualController: '',\n        enterpriseCorporateRepresentative: '',\n        enterpriseCorporateIdCard: '',\n        companyAbbreviation: '',\n        companyBusinessLicense: '',\n        openingAccountInformation: '',\n        documentType: '',\n        contactsFixedTelephone: ''\n      },\n      fuLiContactsInfoDTOS: [{\n        contactsFirsted: '1',\n        contactsSecond: '0',\n        contactsName: '',\n        contactsPost: '',\n        contactsMoblie: '',\n        contactsEmail: '',\n        contactsIdentification: '第一联络人'\n      }, {\n        contactsFirsted: '0',\n        contactsSecond: '1',\n        contactsName: '',\n        contactsPost: '',\n        contactsMoblie: '',\n        contactsEmail: '',\n        contactsIdentification: '第二联络人'\n      }],\n      duty: '',\n      mobile: '',\n      butTxt: '新建完成'\n    };\n  },\n  computed: {},\n  watch: {},\n  destroyed: function destroyed() {\n    this.$store.commit('SET_UserType', false);\n  },\n  created: function created() {\n    if (this.$route.query.id) {\n      this.$store.commit('SET_UserType', true);\n      this.getData();\n    }\n  },\n  methods: {\n    formatter: function formatter(type, value) {\n      if (type === 'year') {\n        return \"\".concat(value, \"\\u5E74\");\n      }\n\n      if (type === 'month') {\n        return \"\".concat(value, \"\\u6708\");\n      }\n\n      return \"\".concat(value, \"\\u65E5\");\n    },\n    showMore: function showMore() {\n      this.showMoreBox = !this.showMoreBox;\n    },\n    startTimeClick: function startTimeClick() {\n      this.selectStartTime = true;\n    },\n    startconfirm: function startconfirm(e) {\n      // 选开始时间\n      if (isNull(e)) {\n        this.selectStartTime = false;\n      } else {\n        var time = formatDate(new Date(e), 'yyyy-MM-dd', 'special');\n        var timeStr = time.split('-');\n        this.form.companyEstablishmentTime = \"\".concat(timeStr[0], \"-\").concat(timeStr[1], \"-\").concat(timeStr[2]);\n        this.selectStartTime = false;\n      }\n    },\n    // addBut\n    addBut: function addBut() {\n      var that = this;\n      var params = this.form;\n      params.fuLiContactsInfoDTOS = this.fuLiContactsInfoDTOS;\n      delete params.companyId;\n      var txts = {\n        companyCustomerType: '客户类别',\n        companyCreditQuota: '授信额度',\n        companyAdress: '地址',\n        companyIndustry: '行业',\n        companyAbbreviation: '客户简称',\n        companyName: '客户名称',\n        companyBusinessLicense: '统一社会信用代码'\n      };\n      if (!this.$checkFrom(params, txts)) return; // this.$Clog(params)\n\n      if (isNull(params.fuLiContactsInfoDTOS[0].contactsName)) {\n        that.$notify('第一联系人姓名不能为空');\n        return;\n      }\n\n      if (isNull(params.fuLiContactsInfoDTOS[0].contactsPost)) {\n        that.$notify('第一联系人职务不能为空');\n        return;\n      }\n\n      if (!checkPhoneNum(params.fuLiContactsInfoDTOS[0].contactsMoblie)) {\n        that.$notify('请确认第一联系人手机号码');\n        return;\n      }\n\n      if (!checkEmail(params.fuLiContactsInfoDTOS[0].contactsEmail)) {\n        that.$notify('请确认第一联系人邮箱');\n        return;\n      }\n\n      if (this.$route.query.id) {\n        this.updated();\n      } else {\n        this.inserted();\n      }\n    },\n    // 新增企业\n    inserted: function inserted() {\n      var _this = this;\n\n      var that = this;\n      var params = this.form;\n      var addType = true;\n      params.fuLiContactsInfoDTOS = this.fuLiContactsInfoDTOS;\n      delete params.companyId; // this.$Clog(params)\n\n      if (isNull(params.fuLiContactsInfoDTOS[0].contactsName)) {\n        that.$notify('第一联系人姓名不能为空');\n        addType = false;\n        return;\n      }\n\n      if (isNull(params.fuLiContactsInfoDTOS[0].contactsPost)) {\n        that.$notify('第一联系人职务不能为空');\n        addType = false;\n        return;\n      }\n\n      if (!checkPhoneNum(params.fuLiContactsInfoDTOS[0].contactsMoblie)) {\n        that.$notify('第一联系人手机号码有误');\n        addType = false;\n        return;\n      }\n\n      if (!checkEmail(params.fuLiContactsInfoDTOS[0].contactsEmail)) {\n        that.$notify('第一联系人邮箱邮箱有误');\n        addType = false;\n      }\n\n      var txts = {\n        companyName: '客户名称',\n        companyIndustry: '行业',\n        companyAdress: '地址',\n        companyCreditQuota: '授信额度',\n        companyCustomerType: '客户类别',\n        companyAbbreviation: '客户简称',\n        companyBusinessLicense: '营业执照'\n      };\n\n      if (addType && this.$checkFrom(params, txts)) {\n        insertFirm(params).then(function (res) {\n          if (res.data) {\n            _this.$notifySty('操作成功');\n\n            _this.$router.go(-1);\n          } else {\n            _this.$notify(res.message);\n          }\n        });\n      }\n    },\n    // 修改企业\n    updated: function updated() {\n      var _this2 = this;\n\n      var params = this.form;\n      delete params.createTime;\n      delete params.updateTime;\n      delete params.leadingOfficialUserId;\n      params.fuLiContactsInfoDTOS = this.fuLiContactsInfoDTOS; // this.$Clog(params);\n\n      if (this.$checkFrom(params)) {\n        updataFirm(params).then(function (res) {\n          _this2.$notifySty('操作成功');\n\n          _this2.$router.go(-1);\n        });\n      }\n    },\n    getData: function getData() {\n      var _this3 = this;\n\n      var params = {\n        id: this.$route.query.id\n      };\n      firmInfo(params).then(function (res) {\n        _this3.tabData = res.data; // console.log('企业信息firmInfo',res)\n\n        _this3.form = res.data;\n        _this3.fuLiContactsInfoDTOS = res.data.fuLiContactsInfoVO;\n        var DArr = _this3.fuLiContactsInfoDTOS;\n        DArr = DArr || [];\n        var one = null;\n        var two = null;\n        var UserArr = [];\n        DArr.map(function (d, idx) {\n          d.contactsIdentification = d.contactsIdentification || '';\n\n          if (d.contactsIdentification.indexOf('第一') > -1) {\n            one = d;\n          }\n\n          if (d.contactsIdentification.indexOf('第二') > -1) {\n            two = d;\n          }\n\n          if (d.contactsIdentification.indexOf('第二') == -1 && d.contactsIdentification.indexOf('第一') == -1) {\n            UserArr.push(d);\n          }\n\n          return d;\n        });\n\n        if (two) {\n          UserArr.unshift(two);\n        }\n\n        if (one) {\n          UserArr.unshift(one);\n        }\n\n        _this3.fuLiContactsInfoDTOS = UserArr; // console.log(this.fuLiContactsInfoDTOS);\n\n        _this3.butTxt = '提交更新';\n      });\n    }\n  }\n};",{"version":3,"sources":["addCustomer.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"addCustomer\">\n    <div class=\"container\">\n      <van-cell-group\n        :border=\"false\"\n        style=\"background:#FCFCFC;\"\n      >\n        <van-field\n          v-model=\"form.companyName\"\n          label=\"客户名称\"\n          required       \n          :disabled=\"$route.query.OTP==2||$route.query.OTP==1\"   \n          type=\"text\"\n          input-align=\"right\"\n          placeholder=\"请输入联系人姓名（必填）\"\n          :error=\"false\"\n          :border=\"false\"\n        />\n        <van-field\n          v-model=\"form.companyAbbreviation\"\n          label=\"客户简称\"\n          :disabled=\"$route.query.OTP==2\" \n          required\n          type=\"text\"\n          input-align=\"right\"\n          placeholder=\"请输入客户简称\"\n          :border=\"false\"\n        />\n        <van-field\n          v-model=\"form.companyAdress\"\n          label=\"地址\"\n          :disabled=\"$route.query.OTP==2\" \n          required\n          type=\"text\"\n          input-align=\"right\"\n          placeholder=\"请输入企业地址（必填）\"\n          :error=\"false\"\n          :border=\"false\"\n        />\n        <van-field\n          v-model=\"form.companyIndustry\"\n          label=\"行业\"\n          :disabled=\"$route.query.OTP==2\" \n          required\n          type=\"text\"\n          input-align=\"right\"\n          placeholder=\"请输入行业分类\"\n          :border=\"false\"\n        />\n        <van-field\n          v-model=\"form.companyBusinessLicense\"\n          label=\"统一社会信用代码\"\n          :disabled=\"$route.query.OTP==2\" \n          required\n          type=\"text\"\n          input-align=\"right\"\n          placeholder=\"请输入统一社会信用代码\"\n          :border=\"false\"\n        />\n        <div class=\"money-text\">\n          <van-field\n            v-model=\"form.companyCreditQuota\"\n            style=\"width:90%;\"\n            label=\"授信额度\"\n            :disabled=\"$route.query.OTP==2\" \n            required\n            type=\"number\"\n            input-align=\"right\"\n            placeholder=\"请输入授信额度 单位:\"\n            :border=\"false\"\n          />        \n          <span class=\"right-text\">万元</span>\n        </div>\n        <div\n          class=\"select-list\"\n          style=\"position: relative;\"\n        >\n          <div class=\"list\">\n            <div class=\"left\">\n              <span\n                style=\"position: absolute;\n                left: 7px;\n                font-size: 14px;\n                color: #f44;\"\n              >*</span>  客户类别\n            </div>\n            <div class=\"right\">\n              <select\n                v-model=\"form.companyCustomerType\"\n                v-placeholder=\"{color: customerProfile}\"\n              >\n                <option value=\"\">\n                  请选择\n                </option>\n                <option value=\"一般客户\">\n                  一般客户\n                </option>\n                <option value=\"意向客户\">\n                  意向客户\n                </option>\n                <option value=\"潜在客户\">\n                  潜在客户\n                </option>\n              </select>\n            </div>\n            <div\n              v-sanjiao=\"{color: customerProfile}\"\n              class=\"saojiao\"\n            />\n          </div>\n        </div>\n        \n        \n        <div v-if=\"showMoreBox\">\n          <div class=\"money-text\">\n            <van-field\n              v-model=\"form.companyInitialFundingRequirements\"\n              style=\"width:90%\"\n              label=\"初步资金需求\"\n              :disabled=\"$route.query.OTP==2\" \n              type=\"number\"\n              input-align=\"right\"\n              placeholder=\"初步资金需求 单位:\"\n              :border=\"false\"\n            />\n            <span class=\"right-text\">万元</span>\n          </div>\n          \n          <div class=\"money-text\">\n            <van-field\n              v-model=\"form.companyRegisteredCapital\"\n              style=\"width:90%\"\n              label=\"注册资金\"\n              type=\"number\"\n              input-align=\"right\"\n              placeholder=\"请输入注册资金 单位:\"\n              :border=\"false\"\n              :disabled=\"$route.query.OTP==2\" \n            />\n            <span class=\"right-text\">万元</span>\n          </div>\n          \n\n          <div class=\"select-list\">\n            <div\n              class=\"list\"\n              @click=\"startTimeClick()\"\n            >\n              <div class=\"left\">\n                成立时间\n              </div>\n              <div\n                class=\"right\"\n                :class=\"{'selectPlaceholder':form.companyEstablishmentTime== ''}\"\n              >\n                {{ form.companyEstablishmentTime== '' ? '请选择' : form.companyEstablishmentTime }}\n              </div>\n              <div class=\"timeBox\">\n                <span\n                  class=\"iconfont iconrili\"\n                  style=\"color:#aebab4\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <van-field\n            v-model=\"form.companyBankAccount\"\n            label=\"银行账号\"\n            type=\"number\"\n            input-align=\"right\"\n            placeholder=\"请输入\"\n            :border=\"false\"\n            :disabled=\"$route.query.OTP==2\" \n          />\n          <van-field\n            v-model=\"form.openingAccountInformation\"\n            label=\"开户行信息\"\n            type=\"text\"\n            input-align=\"right\"\n            placeholder=\"请输入\"\n            :border=\"false\"\n            :disabled=\"$route.query.OTP==2\" \n          />\n          <van-field\n            v-model=\"form.enterpriseActualController\"\n            label=\"实际控制人\"\n            type=\"text\"\n            input-align=\"right\"\n            placeholder=\"请输入\"\n            :border=\"false\"\n            :disabled=\"$route.query.OTP==2\" \n          />\n\n          <van-field\n            v-model=\"form.enterpriseCorporateRepresentative\"\n            label=\"法定代表人\"\n            type=\"text\"\n            input-align=\"right\"\n            placeholder=\"请输入\"\n            :border=\"false\"\n            :disabled=\"$route.query.OTP==2\" \n          />\n          <div\n            class=\"select-list\"\n            style=\"position: relative;\"\n          >                  \n            <div class=\"list\">\n              <div class=\"left\">\n                证件类型\n              </div>\n              <div class=\"right\">\n                <select\n                  v-model=\"form.documentType\"\n                  v-placeholder=\"{color: customerProfile}\"\n                >\n                  <option value=\"\">\n                    请选择\n                  </option>\n                  <option value=\"中华人民共和国居民身份证\">\n                    中华人民共和国居民身份证\n                  </option>\n                  <option value=\"护照\">\n                    护照\n                  </option>\n                  <option value=\"军官证\">\n                    军官证\n                  </option>\n                </select>\n              </div>\n              <div\n                v-sanjiao=\"{color: customerProfile}\"\n                class=\"saojiao\"\n              />\n            </div>\n          </div>\n          <van-field\n            v-model=\"form.enterpriseCorporateIdCard\"\n            label=\"法定代表人身份证号\"\n            type=\"text\"\n            input-align=\"right\"\n            placeholder=\"请输入\"\n            :border=\"false\"\n            :disabled=\"$route.query.OTP==2\" \n          />\n        </div>\n      </van-cell-group>\n\n      <div\n        class=\"show-more\"\n        @click=\"showMore()\"\n      >\n        <span>{{ showMoreBox == false ? '查看更多' : '收回' }}</span>\n        <van-icon\n          v-if=\"!showMoreBox\"\n          style=\"position:relative;top:2px;\"\n          name=\"arrow-down\"\n        />\n        <van-icon\n          v-if=\"showMoreBox\"\n          style=\"position:relative;top:1px;\"\n          name=\"arrow-up\"\n        />\n      </div>\n\n      <!-- 第一联系人 -->\n      <div\n        v-for=\"(itm,idx) in fuLiContactsInfoDTOS\"\n        :key=\"idx\"\n        class=\"first-contact\"\n      >\n        <div class=\"title\">\n          {{ itm.contactsIdentification }} \n        </div>\n        <van-cell-group\n          :border=\"false\"\n          style=\"background:#FCFCFC;\"\n        >\n          <van-field\n            v-model=\"itm.contactsName\"\n            :label=\"'姓名'\"\n            type=\"text\"\n            :disabled=\"$route.query.OTP==2\" \n            :required=\"itm.contactsIdentification.indexOf('第一')>-1||false\"\n            input-align=\"right\"\n            placeholder=\"请输入联系人姓名（必填）\"\n            :error=\"false\"\n            :border=\"false\"\n          />\n          <van-field\n            v-model=\"itm.contactsPost\"\n            :label=\"'职务'\"\n            type=\"text\"\n            :required=\"itm.contactsIdentification.indexOf('第一')>-1||false\"\n            input-align=\"right\"\n            placeholder=\"请输入联系人职务（必填）\"\n            :error=\"false\"\n            :border=\"false\"\n            :disabled=\"$route.query.OTP==2\" \n          />\n          <van-field\n            v-model=\"itm.contactsMoblie\"\n            :label=\"'手机'\"\n            type=\"tel\"\n            :required=\"itm.contactsIdentification.indexOf('第一')>-1||false\"\n            input-align=\"right\"\n            placeholder=\"请输入联系人手机（11位纯数字）\"\n            :error=\"false\"\n            :border=\"false\"\n            :disabled=\"$route.query.OTP==2\" \n          />\n          <van-field\n            v-model=\"itm.contactsEmail\"\n            :label=\"'邮箱'\"\n            type=\"text\"\n            :required=\"itm.contactsIdentification.indexOf('第一')>-1||false\"\n            input-align=\"right\"\n            placeholder=\"请输入联系人邮箱\"\n            :error=\"false\"\n            :border=\"false\"\n            :disabled=\"$route.query.OTP==2\" \n          />\n        </van-cell-group>\n      </div>\n      <div class=\"footer\">\n        <van-button\n          v-if=\"$route.query.OTP!=2\"\n          class=\"gradual-btn\"\n          style=\"width:100%;\"\n          type=\"primary\"\n          @click=\"addBut\"\n        >\n          {{ butTxt }}\n        </van-button>\n      </div>\n    </div>\n\n    <!-- 时间选择 -->\n    <van-popup\n      v-model=\"selectStartTime\"\n      position=\"bottom\"\n      :overlay=\"true\"\n    >\n      <van-datetime-picker\n        v-model=\"currentTime\"\n        type=\"date\"\n        :max-date=\"maxDate\"\n        :min-date=\"minDate\"\n        :formatter=\"formatter\"\n        @confirm=\"startconfirm($event)\"\n        @cancel=\"startconfirm()\"\n      />\n    </van-popup>\n  </div>\n</template>\n<script>\nimport { insertFirm, updataFirm } from '@/service/home'\nimport { firmInfo } from '@/service/customer'\n// import { mapState, Store } from 'vuex'\nimport {\n  formatDate, isNull, checkPhoneNum, checkEmail,\n} from '@/utils'\n\nexport default {\n  name: 'AddCustomer',\n  data() {\n    return {\n\n      customerProfile: -1,\n      showMoreBox: false,\n      selectStartTime: false,\n      createTime: '',\n      maxDate: new Date(),\n      minDate: new Date(1900, 1, 1),\n      currentTime: new Date(),\n      // formData\n      form: {\n        companyName: '', // 公司名称\n        companyAdress: '',\n        companyIndustry: '',\n        companyCreditQuota: '',\n        companyCustomerType: '',\n        companyInitialFundingRequirements: '',\n        companyUnifiedCreditCode: '',\n        companyRegisteredCapital: '',\n        companyEstablishmentTime: '',\n        companyBankAccount: '',\n        enterpriseActualController: '',\n        enterpriseCorporateRepresentative: '',\n        enterpriseCorporateIdCard: '',\n        companyAbbreviation:'',\n        companyBusinessLicense:'',\n        openingAccountInformation:'',\n        documentType:'',\n        contactsFixedTelephone:'',\n      },\n      fuLiContactsInfoDTOS: [{\n        contactsFirsted: '1',\n        contactsSecond: '0',\n        contactsName: '',\n        contactsPost: '',\n        contactsMoblie: '',\n        contactsEmail: '',\n        contactsIdentification:'第一联络人'\n      }, {\n        contactsFirsted: '0',\n        contactsSecond: '1',\n        contactsName: '',\n        contactsPost: '',\n        contactsMoblie: '',\n        contactsEmail: '',\n        contactsIdentification:'第二联络人'\n      }],\n      duty: '',\n      mobile: '',\n      butTxt: '新建完成',\n    }\n  },\n  computed: {\n\n  },\n  watch: {},\n  destroyed() {\n    this.$store.commit('SET_UserType', false)\n  },\n  created() {\n    if(this.$route.query.id){\n      this.$store.commit('SET_UserType',true) \n      this.getData()\n    }\n  },\n  methods: {\n    formatter(type, value) {\n      if (type === 'year') {\n        return `${value}年`\n      } if (type === 'month') {\n        return `${value}月`\n      }\n      return `${value}日`\n    },\n    showMore() {\n      this.showMoreBox = !this.showMoreBox\n    },\n    startTimeClick() {\n      this.selectStartTime = true\n    },\n    startconfirm(e) {\n      // 选开始时间\n      if (isNull(e)) {\n        this.selectStartTime = false\n      } else {\n        const time = formatDate(new Date(e), 'yyyy-MM-dd', 'special')\n        const timeStr = time.split('-')\n        this.form.companyEstablishmentTime = `${timeStr[0]}-${timeStr[1]}-${timeStr[2]}`\n        this.selectStartTime = false\n      }\n    },\n    // addBut\n    addBut() {\n      const that = this\n      const params = this.form\n      params.fuLiContactsInfoDTOS = this.fuLiContactsInfoDTOS\n      delete params.companyId\n      let txts = {                                                        \n        companyCustomerType:'客户类别',\n        companyCreditQuota:'授信额度',\n        companyAdress:'地址',\n        companyIndustry:'行业',\n        companyAbbreviation:'客户简称',\n        companyName:'客户名称',\n        companyBusinessLicense:'统一社会信用代码',\n      } \n      if ( !this.$checkFrom(params,txts))return\n      // this.$Clog(params)\n      if(isNull(params.fuLiContactsInfoDTOS[0].contactsName)){\n        that.$notify('第一联系人姓名不能为空')\n        return\n      }\n      if(isNull(params.fuLiContactsInfoDTOS[0].contactsPost)){\n        that.$notify('第一联系人职务不能为空')\n        return\n      }\n      if (!checkPhoneNum(params.fuLiContactsInfoDTOS[0].contactsMoblie)) {\n        that.$notify('请确认第一联系人手机号码')\n        return\n      }\n      if (!checkEmail(params.fuLiContactsInfoDTOS[0].contactsEmail)) {\n        that.$notify('请确认第一联系人邮箱')\n        return\n      }\n      if (this.$route.query.id) {\n        this.updated()\n      } else {\n        this.inserted()\n      }\n      \n    },\n    // 新增企业\n    inserted() {\n      const that = this\n      const params = this.form\n      let addType = true\n\n      params.fuLiContactsInfoDTOS = this.fuLiContactsInfoDTOS\n      delete params.companyId\n\n      // this.$Clog(params)\n      if(isNull(params.fuLiContactsInfoDTOS[0].contactsName)){\n        that.$notify('第一联系人姓名不能为空')\n        addType = false\n        return\n      }\n      if(isNull(params.fuLiContactsInfoDTOS[0].contactsPost)){\n        that.$notify('第一联系人职务不能为空')\n        addType = false\n        return\n      }\n      if (!checkPhoneNum(params.fuLiContactsInfoDTOS[0].contactsMoblie)) {\n          that.$notify('第一联系人手机号码有误')\n          addType = false\n          return\n        }\n        if (!checkEmail(params.fuLiContactsInfoDTOS[0].contactsEmail)) {\n          that.$notify('第一联系人邮箱邮箱有误')\n          addType = false\n        }\n\n      let txts = {\n        companyName:'客户名称',\n        companyIndustry:'行业',\n        companyAdress:'地址',\n        companyCreditQuota:'授信额度',\n        companyCustomerType:'客户类别',\n        companyAbbreviation:'客户简称',\n        companyBusinessLicense:'营业执照'\n      } \n      if (addType && this.$checkFrom(params,txts)) {\n        insertFirm(params).then((res) => {\n          if (res.data) {\n            this.$notifySty('操作成功')\n            this.$router.go(-1)\n          } else {\n            this.$notify(res.message)\n          }\n        })\n      }\n      \n    },\n    // 修改企业\n    updated() {\n      const params = this.form\n      delete params.createTime\n      delete params.updateTime\n      delete params.leadingOfficialUserId\n      params.fuLiContactsInfoDTOS = this.fuLiContactsInfoDTOS\n      // this.$Clog(params);\n      if (this.$checkFrom(params)) {\n\n        updataFirm(params).then((res) => {\n          this.$notifySty('操作成功')\n          this.$router.go(-1)\n        })\n      }\n    },\n    getData() {\n      const params = {\n        id: this.$route.query.id,\n      }\n      firmInfo(params).then((res) => {\n        this.tabData = res.data\n        // console.log('企业信息firmInfo',res)\n        this.form = res.data\n        this.fuLiContactsInfoDTOS = res.data.fuLiContactsInfoVO\n        \n        let DArr = this.fuLiContactsInfoDTOS\n        DArr = DArr || []\n        let one = null\n        let two = null\n        let UserArr = []\n\n        DArr.map((d, idx) => {   \n          d.contactsIdentification = d.contactsIdentification||''       \n          if (d.contactsIdentification.indexOf('第一')>-1) {\n            one=d\n          }\n          if (d.contactsIdentification.indexOf('第二')>-1) {\n            two=d\n          }\n          if (d.contactsIdentification.indexOf('第二') == -1&&d.contactsIdentification.indexOf('第一') == -1) {\n            UserArr.push(d)\n          }\n          return d\n        })   \n        if(two){\n          UserArr.unshift(two)\n        } \n        if(one){\n          UserArr.unshift(one)\n        }        \n        this.fuLiContactsInfoDTOS = UserArr\n        // console.log(this.fuLiContactsInfoDTOS);\n        this.butTxt = '提交更新'\n      })\n    },    \n  },\n}\n</script>\n<style lang=\"less\" scoped>\n.container {\n  width: 100%;\n  padding: 15px 15px 100px 15px;\n  box-sizing: border-box;\n  .money-text{\n    position: relative;\n    .right-text{\n      position: absolute;\n      right: 5%;\n      z-index: 8;\n      font-size: 13px;\n      line-height: 44px;\n      top: 0px;\n      color: #999;\n    }\n  }\n  \n  .first-contact {\n    width: 100%;\n    background: #ffffff;\n    margin: 10px 0;\n    .title {\n      width: 100%;\n      height: 40px;\n      line-height: 40px;\n      font-size: 12px;\n      color: #626262;\n      font-weight: bold;\n      text-align: center;\n    }\n  }\n  .select-list {\n    width: 100%;\n    padding: 0px 0px 0px 15px;\n    box-sizing: border-box;\n    .addborder {\n      border-bottom: 1px solid #f5f6f8;\n    }\n    .list {\n      width: 100%;\n      height: 40px;\n      display: flex;\n      line-height: 40px;\n      background-color: #fff;\n      color: #323233;\n      font-size: 14px;\n      overflow: hidden;\n      color: #323233;\n      font-size: 14px;\n      box-sizing: border-box;\n      padding-right: 15px;\n      .left {\n        max-width: 90px;\n        height: 40px;\n      }\n      .right {\n        flex: 1;\n        height: 40px;\n        text-align: right;\n        select {\n          width: 100%;\n          height: 40px;\n          text-align: right;\n          border: none;\n          outline: none;\n          appearance: none;\n          -moz-appearance: none;\n          -webkit-appearance: none;\n          -ms-appearance: none;\n          direction: rtl;\n          text-indent: 5px;\n          background: #ffffff;\n        }\n      }\n    }\n    .saojiao {\n      width: 0;\n      height: 0;\n      border-width: 6px;\n      border-style: solid;\n      border-color: #323233 transparent transparent transparent;\n      margin-top: 17px;\n    }\n    .timeBox {\n      width: 25px;\n      height: 40px;\n      text-align: right;\n    }\n  }\n  .show-more {\n    width: 100%;\n    height: 40px;\n    line-height: 40px;\n    font-size: 12px;\n    color: #999999;\n    text-align: center;\n    background: #ffffff;\n  }\n  .footer {\n    width: 100%;\n    height: 70px;\n    background: #fcfcfc;\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    padding: 0 10px;\n    box-sizing: border-box;\n  }\n}\n</style>\n"],"sourceRoot":"src/views/addCustomer"}]}