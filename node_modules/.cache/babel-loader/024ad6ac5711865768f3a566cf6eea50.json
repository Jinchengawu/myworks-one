{"remainingRequest":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/babel-loader/lib/index.js!/Users/wangzhanyuan/code/oc-works/fuli/src/main.js","dependencies":[{"path":"/Users/wangzhanyuan/code/oc-works/fuli/src/main.js","mtime":1564136529039},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/core-js/modules/es6.array.iterator.js\";\nimport \"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/core-js/modules/es6.promise.js\";\nimport \"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/core-js/modules/es6.object.assign.js\";\nimport \"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/core-js/modules/es7.promise.finally.js\";\nimport Vue from 'vue';\nimport Vant, { Toast } from 'vant';\nimport { wxlogin, setJsapiTiem } from '@/service/login';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\nimport { isNull, isWeiXin } from '@/utils';\nimport 'vant/lib/index.css';\nimport './assets/css/reset.css'; // eslint-disable-next-line import/extensions\n\nimport request from './service/request.js'; // 引入自定义组件。index.js是组件的默认入口\n// import visit from './components/visit/visit'\n\nimport addVisit from '@views/addVisit/addVisit';\nVue.component('add-visit', addVisit);\nVue.use(Vant);\nVue.config.productionTip = false;\nVue.directive('placeholder', {\n  inserted: function inserted(el) {\n    el.className = 'selectPlaceholder';\n  },\n  update: function update(el, binding) {\n    if (binding.value.color === -1) {\n      el.className = 'selectPlaceholder';\n    } else {\n      el.className = ' ';\n    }\n  }\n});\nVue.directive('sanjiao', {\n  inserted: function inserted(el) {\n    el.className += ' selectborder';\n  },\n  update: function update(el, binding) {\n    if (binding.value.color === -1) {\n      el.className += ' selectborder';\n    } else {\n      el.classList.remove('selectborder');\n    }\n  }\n}); // 跳转前更新\n\nrouter.beforeEach(function (to, from, next) {\n  Toast.clear(); // console.log(to, from)\n\n  next();\n}); // 全局路由跳转后监听\n\nrouter.afterEach(function (to, from) {\n  // console.log(window.location.href ,1111)\n  // 微信签名\n  // TODO: 判断是否为微信环境\n  if (to.name == 'home') {\n    store.commit('SET_ACTIVE', 0);\n    store.commit('SET_USER_DATA', null);\n  }\n\n  setTimeout(function () {\n    var isWX = isWeiXin(); // TODO: 判断是否为微信环境\n\n    if (isWX) {\n      // console.log(window.location.href ,2222)\n      wxlogin({\n        url: window.location.href\n      }).then(function (res) {\n        console.log('jsapi', res);\n        window.wx.config({\n          beta: true,\n          debug: false,\n          appId: res.data.appid,\n          timestamp: res.data.timestamp,\n          nonceStr: res.data.nonceStr,\n          signature: res.data.signature,\n          jsApiList: ['openLocation', 'getLocation', 'openEnterpriseChat', 'invoke']\n        });\n        window.wx.ready(function () {\n          // console.log('获取外部联系人',wx.invoke)     \n          // console.log('openEnterpriseChat回话接口',wx.openEnterpriseChat)  \n          //  TODO: 设置功能\n          wx.getLocation({\n            type: 'gcj02',\n            // 默认为wgs84的gps坐标，如果要返回直接给openLocation用的火星坐标，可传入'gcj02'\n            success: function success(res) {\n              // alert('jssdk获取当前定位33', res)\n              // console.log('jssdk获取当前定位33', res)\n              var latitude = res.latitude; // 纬度，浮点数，范围为90 ~ -90\n\n              var longitude = res.longitude; // 经度，浮点数，范围为180 ~ -180。\n\n              var speed = res.speed; // 速度，以米/每秒计\n\n              var accuracy = res.accuracy; // 位置精度\n\n              var indexXY = {\n                latitude: res.latitude,\n                longitude: res.longitude\n              };\n              store.commit('SET_INDEXXY', indexXY); // console.log('indexXY',store.getters.indexXY)\n            }\n          });\n        });\n        window.wx.error(function (res) {\n          //确保一层登录态只能触发一次清除缓存          \n          if (store.getters.iswx_remove) {\n            return;\n          }\n\n          setJsapiTiem().then(function (res) {\n            store.commit('SET_ISWX_REMOVE', true);\n            wxlogin({\n              url: window.location.href\n            });\n          }).catch(function (err) {\n            return console.error(err);\n          });\n        });\n      }).catch(function (err) {\n        return console.error(err);\n      });\n    }\n  }, 1000);\n}); // 自定义this原型链方法\n\n/**\n * methods:$Clog\n * 输出\n */\n\nVue.prototype.$Clog = function (res) {\n  return console.log(res);\n};\n\nVue.prototype.$isNull = function (str) {\n  if (str === '' || str === undefined || str === null) {\n    return true;\n  }\n\n  return false;\n}; // eslint-disable-next-line func-names\n\n\nVue.prototype.$checkFrom = function (data, from) {\n  // console.log(data, from)\n  var type = true; //eslint-disable-next-line no-restricted-syntax\n\n  for (var i in from) {\n    if (isNull(data[i])) {\n      console.log(i, data[i]);\n      this.$notify(\"\".concat(from[i], \"\\u4E3A\\u5FC5\\u586B\\u9879\"));\n      type = false;\n    }\n  }\n\n  return type;\n}; // eslint-disable-next-line func-names\n\n\nVue.prototype.$baseUrl = function () {\n  //正式\n  // return 'http://scrm.ocheng.me/v2/api/storage/download?remoteFilename='\n  //测试\n  return 'http://v2.ocheng.me/api/storage/download?remoteFilename=';\n};\n\nVue.prototype.$notifySty = function (str, fontsize, bgd) {\n  str = str || '提示';\n  fontsize = fontsize || 1000;\n  bgd = bgd || 'green';\n  this.$notify({\n    message: str,\n    duration: fontsize,\n    background: bgd\n  });\n};\n\nnew Vue({\n  router: router,\n  store: store,\n  render: function render(h) {\n    return h(App);\n  }\n}).$mount('#app');",{"version":3,"sources":["/Users/wangzhanyuan/code/oc-works/fuli/src/main.js"],"names":["Vue","Vant","Toast","wxlogin","setJsapiTiem","App","router","store","isNull","isWeiXin","request","addVisit","component","use","config","productionTip","directive","inserted","el","className","update","binding","value","color","classList","remove","beforeEach","to","from","next","clear","afterEach","name","commit","setTimeout","isWX","url","window","location","href","then","res","console","log","wx","beta","debug","appId","data","appid","timestamp","nonceStr","signature","jsApiList","ready","getLocation","type","success","latitude","longitude","speed","accuracy","indexXY","error","getters","iswx_remove","catch","err","prototype","$Clog","$isNull","str","undefined","$checkFrom","i","$notify","$baseUrl","$notifySty","fontsize","bgd","message","duration","background","render","h","$mount"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vant, { Toast, } from 'vant'\nimport { wxlogin,setJsapiTiem } from '@/service/login'\nimport App from './App.vue'\nimport router from './router'\nimport store from './store'\nimport {  isNull,isWeiXin, } from '@/utils'\nimport 'vant/lib/index.css'\nimport './assets/css/reset.css'\n// eslint-disable-next-line import/extensions\nimport request from './service/request.js'\n// 引入自定义组件。index.js是组件的默认入口\n// import visit from './components/visit/visit'\nimport addVisit from '@views/addVisit/addVisit'\n\nVue.component('add-visit', addVisit)\nVue.use(Vant)\n\nVue.config.productionTip = false\n\n\nVue.directive('placeholder', {\n  inserted(el) {\n    el.className = 'selectPlaceholder'\n  },\n  update(el, binding) {\n    if (binding.value.color === -1) {\n      el.className = 'selectPlaceholder'\n    } else {\n      el.className = ' '\n    }\n  },\n})\nVue.directive('sanjiao', {\n  inserted(el) {\n    el.className += ' selectborder'\n  },\n  update(el, binding) {\n    if (binding.value.color === -1) {\n      el.className += ' selectborder'\n    } else {\n      el.classList.remove('selectborder')\n    }\n  },\n})\n\n// 跳转前更新\nrouter.beforeEach((to, from, next) => {\n  Toast.clear()\n  // console.log(to, from)\n  \n  next()\n})\n\n\n// 全局路由跳转后监听\nrouter.afterEach((to, from) => { \n  \n  // console.log(window.location.href ,1111)\n  // 微信签名\n  // TODO: 判断是否为微信环境\n  if(to.name=='home'){\n    store.commit('SET_ACTIVE',0)\n    store.commit('SET_USER_DATA',null)\n  }\n  \n  setTimeout(()=>{\n    const isWX = isWeiXin() // TODO: 判断是否为微信环境\n  if (isWX) {\n    // console.log(window.location.href ,2222)\n    wxlogin({\n        url: window.location.href\n      })\n      .then((res) => {\n        console.log('jsapi', res)\n        window.wx.config({\n          beta: true,\n          debug: false,\n          appId: res.data.appid,\n          timestamp: res.data.timestamp,\n          nonceStr: res.data.nonceStr,\n          signature: res.data.signature,\n          jsApiList: ['openLocation',\n            'getLocation',\n            'openEnterpriseChat',\n            'invoke'\n          ]\n        })\n        window.wx.ready(() => {   \n          // console.log('获取外部联系人',wx.invoke)     \n          // console.log('openEnterpriseChat回话接口',wx.openEnterpriseChat)  \n          //  TODO: 设置功能\n          wx.getLocation({\n            type: 'gcj02', // 默认为wgs84的gps坐标，如果要返回直接给openLocation用的火星坐标，可传入'gcj02'\n            success: function (res) {\n              // alert('jssdk获取当前定位33', res)\n              // console.log('jssdk获取当前定位33', res)\n              var latitude = res.latitude // 纬度，浮点数，范围为90 ~ -90\n              var longitude = res.longitude // 经度，浮点数，范围为180 ~ -180。\n              var speed = res.speed // 速度，以米/每秒计\n              var accuracy = res.accuracy // 位置精度\n              let indexXY = {\n                latitude: res.latitude,\n                longitude: res.longitude,\n              }\n              store.commit('SET_INDEXXY', indexXY)\n              // console.log('indexXY',store.getters.indexXY)\n            }\n          })\n        })\n        window.wx.error((res) => {\n          //确保一层登录态只能触发一次清除缓存          \n          if(store.getters.iswx_remove){\n            return\n          }\n          setJsapiTiem().then((res) => {\n            store.commit('SET_ISWX_REMOVE', true)\n            wxlogin({\n              url: window.location.href\n            })\n          }).catch(err => console.error(err))\n        })\n      })\n      .catch(err => console.error(err))\n    }\n  },1000)\n  \n\n})\n// 自定义this原型链方法\n/**\n * methods:$Clog\n * 输出\n */\nVue.prototype.$Clog = res => console.log(res)\nVue.prototype.$isNull = (str) => {\n  if (str === '' || str === undefined || str === null) {\n    return true\n  }\n  return false\n}\n// eslint-disable-next-line func-names\nVue.prototype.$checkFrom = function (data, from) {\n  // console.log(data, from)\n  let type = true  \n  //eslint-disable-next-line no-restricted-syntax\n  for (let i in from) {\n    if (isNull(data[i])) {\n      console.log(i, data[i])\n      this.$notify(`${from[i]}为必填项`)\n      type = false\n    }\n  }\n  return type\n}\n// eslint-disable-next-line func-names\nVue.prototype.$baseUrl = function () {\n  //正式\n  // return 'http://scrm.ocheng.me/v2/api/storage/download?remoteFilename='\n  //测试\n  return 'http://v2.ocheng.me/api/storage/download?remoteFilename='\n}\n\nVue.prototype.$notifySty = function (str, fontsize, bgd) {\n  str = str || '提示'\n  fontsize = fontsize || 1000\n  bgd = bgd || 'green'\n  this.$notify({\n    message: str,\n    duration: fontsize,\n    background: bgd,\n  })\n}\nnew Vue({\n  router,\n  store,\n  render: h => h(App),\n}).$mount('#app')\n"]}]}