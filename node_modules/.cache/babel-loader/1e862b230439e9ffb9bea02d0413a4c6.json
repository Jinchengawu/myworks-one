{"remainingRequest":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/thread-loader/dist/cjs.js!/Users/wangzhanyuan/code/oc-works/fuli/node_modules/babel-loader/lib/index.js!/Users/wangzhanyuan/code/oc-works/fuli/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhanyuan/code/oc-works/fuli/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhanyuan/code/oc-works/fuli/src/views/addVisit/addVisit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhanyuan/code/oc-works/fuli/src/views/addVisit/addVisit.vue","mtime":1564473298308},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { addVisit, putVisit, upload, getVisit, idProject, menuProject, projectList } from '@/service/customer'; // import { mapState } from 'vuex'\n\nimport addConst from '../addConst/addConst.vue';\nimport { txMap } from '@/txMap.js';\nimport { formatDate, isNull } from '@/utils';\nexport default {\n  name: 'AddVisit',\n  components: {\n    'add-const': addConst\n  },\n  props: {\n    //iscomponent\n    isCPT: {\n      type: Boolean,\n      default: false\n    },\n    //回收数据isCallDataType\n    isCDT: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      form: {\n        visitName: this.$store.getters.userInfo.name,\n        visitUserId: this.$store.getters.userInfo.id,\n        companyName: this.$store.getters.userData.companyName,\n        visitType: '',\n        visitContent: '',\n        visitMode: '',\n        visitSigned: '',\n        visitTime: '',\n        projectDTOS: [],\n        projectId: '',\n        visitLatitude: '',\n        visitLongitude: ''\n      },\n      callLists: [{\n        name: '立项',\n        val: '1'\n      }, {\n        name: '报价',\n        val: '2'\n      }, {\n        name: '尽调',\n        val: '3'\n      }, {\n        name: '上会',\n        val: '4'\n      }, {\n        name: '签约',\n        val: '5'\n      }],\n      callList: [],\n      setIsType1: '0',\n      //事件1关联的事件id\n      isType1D: {},\n      setIsType2: '0',\n      //事件2关联的事件id\n      isType2D: {},\n      selectStartTime: false,\n      maxDate: new Date(),\n      minDate: '',\n      currentTime: new Date(),\n      upType: 1,\n      //关联菜单标识\n      upIng: false,\n      //回收数据通讯标识\n      uped: false,\n      //回收数据态\n      pgList: [],\n      OTP: false,\n      //当前打开该详情的状态\n      imgList: [] //上传图片\n\n    };\n  },\n  watch: {\n    isCDT: function isCDT(newV, oldV) {\n      this.form.userId = this.$store.getters.userInfo.id;\n      this.form.userName = this.$store.getters.userInfo.name;\n      var params = this.form;\n      var txts = {\n        visitType: '拜访类型',\n        visitContent: '拜访内容',\n        visitMode: '拜访方式',\n        visitTime: '拜访时间'\n      };\n\n      if (!this.$checkFrom(params, txts)) {\n        return;\n      }\n\n      this.$emit('VisitChange', this.form);\n      return;\n    }\n  },\n  mounted: function mounted() {\n    var that = this;\n  },\n  updated: function updated() {\n    var container = document.getElementById('container');\n\n    if (container.children[0]) {\n      container.children[0].childNodes[1].innerHTML = '';\n    }\n  },\n  created: function created() {\n    var nowDate = new Date(new Date().toLocaleDateString()); // 获取当前时间\n\n    this.minDate = new Date(nowDate.getTime() - 2 * 24 * 60 * 60 * 1000);\n\n    if (this.$route.query.id) {\n      this.getVT(this.$route.query.id);\n      this.upType = 2, this.OTP = this.$route.query.OTP == 2 || this.$route.query.OTP == 1 ? true : false;\n    }\n\n    this.getProjectList();\n    this.indexXY = this.$store.getters.indexXY;\n  },\n  methods: {\n    update: function update(e) {\n      var _this2 = this;\n\n      var file = e.target.files[0];\n\n      var _this = this;\n\n      var param = new FormData();\n      param.append('file', file);\n      var userData = this.$store.getters.userData;\n      var fileName = userData.companyAbbreviation + '-' + userData.companyBusinessLicense + '-' + formatDate(new Date(), 'yyyyMMdd');\n      var config = {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      };\n      upload(param, config).then(function (res) {\n        // console.log('上传文件', res.data,_this.$notifySty)\n        // console.log();\n        _this2.$notifySty('上传成功');\n\n        _this2.newFile = res.data.url;\n\n        _this2.imgList.push(res.data.url);\n\n        _this2.imgList.length = _this2.imgList.length > 2 ? 2 : _this2.imgList.length;\n      });\n    },\n    mapObj: function mapObj(x, y) {\n      txMap().then(function (qq) {\n        // console.log(qq)\n        var map = new qq.maps.Map(document.getElementById('container'), {\n          // 地图的中心地理坐标。\n          center: new qq.maps.LatLng(x, y),\n          zoom: 15,\n          //设置缩放级别\n          draggable: false,\n          //设置是否可以拖拽\n          scrollwheel: false,\n          //设置是否可以滚动\n          disableDoubleClickZoom: true,\n          //设置是否可以双击放大\n          scaleControl: false,\n          mapTypeControlOptions: {\n            mapTypeIds: []\n          },\n          //置空地图类型        \n          zoomControl: false //设置是否可以缩放\n\n        });\n        var marker = new qq.maps.Marker({\n          //设置Marker的位置坐标\n          position: new qq.maps.LatLng(x, y),\n          //设置显示Marker的地图\n          map: map\n        });\n      });\n    },\n    //projectChange项目变更\n    projectChange: function projectChange() {\n      var _this3 = this;\n\n      menuProject({\n        id: this.form.projectId\n      }).then(function (res) {\n        _this3.callList = [];\n\n        _this3.callLists.map(function (d) {\n          res.data.map(function (dd) {\n            if (d.val == dd) _this3.callList.push(d);\n          });\n        }); // this.form.projectId = res.data[0].information.projectName\n\n\n        console.log('projectChange项目变更', res);\n      });\n    },\n    //拜访方式变化\n    visitModeChange: function visitModeChange(itm) {\n      if (itm == '现场' && this.$route.query.OTP != 2) {\n        console.log('run');\n        this.form.visitLongitude = this.$store.getters.indexXY.longitude;\n        this.form.visitLatitude = this.$store.getters.indexXY.latitude;\n        this.mapObj(this.form.visitLatitude, this.form.visitLongitude);\n      }\n    },\n    //获取项目列表\n    getProjectList: function getProjectList() {\n      var _this4 = this;\n\n      var params = {\n        menuType: 1,\n        size: 1000\n      };\n      projectList(params).then(function (res) {\n        _this4.pgList = res.data;\n\n        if (_this4.pgList.length > 0) {\n          _this4.form.projectId = _this4.pgList[0].id;\n\n          _this4.projectChange();\n        }\n      });\n    },\n    //触发关联菜单\n    setIsTypeChange: function setIsTypeChange(who) {\n      if (who == 1) {\n        this.isType1D.isSet = true;\n      } else {\n        this.isType2D.isSet = true;\n      }\n    },\n    //获取关联组件的返回值\n    constCallBack: function constCallBack(e) {\n      console.log('获取关联组件的返回值', e);\n      this.form.projectDTOS[e.isNo - 1] = e;\n      this.addVT();\n    },\n    clickAdd: function clickAdd() {\n      var params = this.form;\n      var txts = {\n        visitType: '拜访类型',\n        visitContent: '拜访内容',\n        visitMode: '拜访方式',\n        visitTime: '拜访时间'\n      };\n\n      if (!this.$checkFrom(params, txts)) {\n        return;\n      }\n\n      this.upIng = !this.upIng;\n\n      if (this.$route.query.id) {\n        this.putVT();\n      } else {\n        this.addVT();\n      }\n    },\n    addVT: function addVT() {\n      var _this5 = this;\n\n      var params = this.form;\n      params.visitUserId = this.$store.getters.userInfo.id;\n\n      if (this.isType1D.isSet || this.isType2D.isSet) {\n        // console.log('this.form.projectDTOS',this.form.projectDTOS)\n        if (this.form.projectDTOS.length == 0) return;\n      }\n\n      addVisit(params).then(function (res) {\n        _this5.$router.go(-1);\n      });\n    },\n    putVT: function putVT() {\n      var _this6 = this;\n\n      var params = this.form;\n      params.visitUserId = this.$store.getters.userInfo.id;\n      putVisit(params).then(function (res) {\n        _this6.$router.go(-1);\n      });\n    },\n    getVT: function getVT(id) {\n      var _this7 = this;\n\n      getVisit({\n        id: id\n      }).then(function (res) {\n        _this7.form = res.data;\n        console.log(_this7.form);\n\n        _this7.mapObj(_this7.form.visitLatitude, _this7.form.visitLongitude);\n      });\n    },\n    formatter: function formatter(type, value) {\n      if (type === 'year') {\n        return \"\".concat(value, \"\\u5E74\");\n      }\n\n      if (type === 'month') {\n        return \"\".concat(value, \"\\u6708\");\n      }\n\n      return \"\".concat(value, \"\\u65E5\");\n    },\n    startTimeClick: function startTimeClick() {\n      if (this.OTP) return;\n      this.selectStartTime = true;\n    },\n    startconfirm: function startconfirm(e) {\n      // 选开始时间\n      if (isNull(e)) {\n        this.selectStartTime = false;\n      } else {\n        var time = formatDate(new Date(e), 'yyyy-MM-dd', 'special');\n        var timeStr = time.split('-');\n        this.form.visitTime = \" \".concat(timeStr[0], \"-\").concat(timeStr[1], \"-\").concat(timeStr[2]);\n        this.selectStartTime = false;\n      }\n    }\n  }\n};",{"version":3,"sources":["addVisit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"addVisit\">\n    <div class=\"containers\">\n      <van-cell-group :border=\"false\">\n        <van-field\n          v-model=\"form.visitName\"\n          label=\"拜访人姓名\"\n          type=\"text\"\n          input-align=\"right\"\n          placeholder=\"请输入拜访人姓名（必填）\"\n          :error=\"false\"\n          :border=\"false\"\n          :readonly=\"true\"\n        />\n        <van-field\n          v-model=\"form.companyName\"\n          label=\"拜访客户\"\n          type=\"text\"\n          input-align=\"right\"\n          placeholder=\"请输入拜访客户（必填）\"\n          :error=\"false\"\n          :border=\"false\"\n          :readonly=\"true\"\n        />\n\n        <div class=\"select-list\"> \n          <div class=\"list\">\n            <div class=\"left\">\n              拜访类型\n            </div>\n            <div class=\"right\">\n              <select\n                v-model=\"form.visitType\"\n                v-placeholder=\"{color: form.visitType}\"\n                :disabled=\"OTP\"\n              >\n                <option value=\"\">\n                  请选择\n                </option>\n                <option value=\"1\">\n                  拜访\n                </option>\n                <option value=\"2\">\n                  回访\n                </option>\n              </select>\n            </div>\n            <div\n              v-sanjiao=\"{color: form.visitType}\"\n              class=\"saojiao\"\n            />\n          </div>\n        </div>\n        \n        <div class=\"select-list\">\n          <div\n            class=\"list\"\n            @click=\"startTimeClick()\"\n          >\n            <div class=\"left\">\n              拜访时间\n            </div>\n            <div\n              class=\"right\"\n              :class=\"{'selectPlaceholder':form.visitTime== ''}\"\n            >\n              {{ form.visitTime== '' ? '请选择' : form.visitTime }}\n            </div>\n            <div class=\"timeBox\">\n              <span\n                class=\"iconfont iconrili\"\n                style=\"color:#aebab4\"\n              />\n            </div>\n          </div>\n        </div>        \n        <van-field\n          v-model=\"form.visitContent\"\n          label=\"拜访内容\"\n          type=\"textarea\"\n          input-align=\"right\"\n          placeholder=\"请输入拜访内容\"\n          autosize\n          :border=\"false\"\n          :readonly=\"$route.query.OTP==2\"\n        />        \n        <!-- <div\n          style=\"max-width: 90px;\n    height: 40px;    color: #323233;\n    font-size: 14px;    line-height: 40px;    text-align: center;\"\n        >\n          拜访内容\n        </div> -->\n        <!-- label=\"拜访内容\" -->\n        \n        <!--         \n        <div style=\"display:flex\">\n          <div class=\"uploadFile\">\n            <span class=\"iconfont iconshangchuan uploadIcon\" />\n            <input\n              class=\"file\"\n              name=\"file\"\n              type=\"file\"\n              @change=\"update\"\n            >\n            <div class=\"uploadText\">\n              点击上传附件\n            </div>\n          </div>\n          <div class=\"callImg\">\n            <img\n              v-for=\"(itm,idx) in imgList\"\n              :key=\"idx\"\n              :src=\"'http://v2.ocheng.me/storage/'+itm\"\n              alt=\"\"\n            >\n          </div> \n        </div> -->\n        \n        <div class=\"select-list\">\n          <div class=\"list\">\n            <div class=\"left\">\n              拜访方式\n            </div>\n            <div class=\"right\">\n              <select\n                v-model=\"form.visitMode\"\n                v-placeholder=\"{color: form.visitMode}\"\n                :disabled=\"OTP\"\n                @change=\"visitModeChange(form.visitMode)\"\n              >\n                <option value=\"\">\n                  请选择\n                </option>\n                <option value=\"电话\">\n                  电话\n                </option>\n                <option value=\"现场\">\n                  现场\n                </option>\n                <option value=\"其他\">\n                  其他\n                </option>\n              </select>\n            </div>\n            <div\n              v-sanjiao=\"{color: form.visitMode}\"\n              class=\"saojiao\"\n            />\n          </div>\n        </div>\n        \n        <div\n          v-show=\"form.visitMode=='现场'\"\n          id=\"container\"\n          style=\"width:100%; height:300px\"\n          class=\"body\"\n        />\n        <iframe\n          id=\"geoPage\"\n          width=\"0\"\n          height=\"0\"\n          frameborder=\"0\"\n          style=\"display:none;\"\n          scrolling=\"no\"\n          src=\"https://apis.map.qq.com/tools/geolocation?key=S3RBZ-LJ76D-AQ54R-H73AR-L6ZEF-CHFCI&referer=myapp\"\n        />\n        <div\n          v-if=\"!isCPT&&!OTP\"\n           \n          class=\"select-list\"\n        >\n          <div>\n            <div\n              v-if=\"pgList.length>0\"\n              class=\"list\"\n            >\n              <div class=\"left\">\n                所属项目\n              </div>\n              <div class=\"right\">\n                <select\n                  v-model=\"form.projectId\"\n                  v-placeholder=\"{color: form.projectId}\"\n                  :disabled=\"OTP\"\n                  @change=\"projectChange\"\n                >\n                  <option\n                    v-for=\"(itm,idx) in pgList\"\n                    :key=\"idx\"\n                    :value=\"itm.id\"\n                  >\n                    {{ itm.information.projectName }}\n                  </option>\n                </select>\n              </div>\n              <div\n                v-sanjiao=\"{color: form.projectId}\"\n                class=\"saojiao\"\n              />\n            </div>\n          </div>\n          <div\n            v-if=\"form.projectId\"\n            class=\"list\"\n          >\n            <div class=\"left\">\n              添加事件1\n            </div>\n            <div class=\"right\">\n              <select\n                v-model=\"setIsType1\"\n                v-placeholder=\"{color: setIsType1}\"\n                :disabled=\"OTP\"\n                @change=\"setIsTypeChange(1)\"\n              >\n                <option\n                  v-for=\"(itm,idx) in callList\"\n                  :key=\"idx\"\n                  :value=\"itm.val\"\n                >\n                  {{ itm.name }}\n                </option>\n              </select>\n            </div>\n            <div\n              v-sanjiao=\"{color: setIsType1}\"\n              class=\"saojiao\"\n            />\n          </div>\n        </div>\n        <add-const\n          :is-type=\"setIsType1\"\n          :up-ing=\"upIng\"\n          :is-no=\"1\"\n          @callBack=\"constCallBack\"\n        />\n        <div\n          v-if=\"!isCPT\"\n          class=\"select-list\"\n        >\n          <div\n            v-if=\"form.projectId\"\n            class=\"list\"\n          >\n            <div class=\"left\">\n              添加事件2\n            </div>\n            <div class=\"right\">\n              <select\n                v-model=\"setIsType2\"\n                v-placeholder=\"{color: setIsType2}\"\n                @change=\"setIsTypeChange(2)\"\n              >\n                <option\n                  v-for=\"(itm,idx) in callList\"\n                  :key=\"idx\"\n                  :value=\"itm.val\"\n                >\n                  {{ itm.name }}\n                </option>\n              </select>\n            </div>\n            <div\n              v-sanjiao=\"{color: setIsType2}\"\n              class=\"saojiao\"\n            />\n          </div>\n        </div>\n        <add-const\n          :is-type=\"setIsType2\"\n          :up-ing=\"upIng\"\n          :is-no=\"2\"\n          @callBack=\"constCallBack\"\n        />\n      </van-cell-group>\n      <!-- <div> <div v-if=\"form.visitMode=='现场'\">xy</div> \n        <div>getx{{ form.visitLongitude }}</div>\n        <div>gety{{ form.visitLatitude }}</div>\n        <div>$storex{{ $store.getters.indexXY.longitude }}</div>\n        <div>$storey{{ $store.getters.indexXY.latitude }}</div>\n      </div> -->\n      <div class=\"footer\">\n        <van-button\n          v-if=\"!$route.query.OTP||$route.query.OTP==1\"\n          class=\"gradual-btn\"\n          style=\"width:100%;\"\n          type=\"primary\"\n          @click=\"clickAdd\"\n        >\n          确认信息\n        </van-button>\n      </div>\n    </div>\n    \n    \n    <!-- 时间选择 -->\n    <van-popup\n      v-model=\"selectStartTime\"\n      position=\"bottom\"\n      :overlay=\"true\"\n    >\n      <van-datetime-picker\n        v-model=\"currentTime\"\n        type=\"date\"\n        :max-date=\"maxDate\"\n        :min-date=\"minDate\"\n        :formatter=\"formatter\"\n        @confirm=\"startconfirm($event)\"\n        @cancel=\"startconfirm()\"\n      />\n    </van-popup>\n    <!-- 关联操作 -->\n  </div>\n</template>\n<script>\nimport { addVisit, putVisit,upload, getVisit, idProject, menuProject, projectList } from '@/service/customer'\n// import { mapState } from 'vuex'\nimport addConst from '../addConst/addConst.vue'\nimport { txMap } from '@/txMap.js'\nimport { formatDate, isNull } from '@/utils'\n\nexport default {\n  name: 'AddVisit',\n  components: {\n    'add-const': addConst,\n  },\n  props: {\n    //iscomponent\n    isCPT: {\n      type: Boolean,\n      default: false\n    },\n    //回收数据isCallDataType\n    isCDT: {\n      type: Boolean,\n      default: false\n    },\n  },\n  data() {\n    return {\n      form: {\n        visitName: this.$store.getters.userInfo.name,\n        visitUserId: this.$store.getters.userInfo.id,\n        companyName: this.$store.getters.userData.companyName,\n        visitType: '',\n        visitContent: '',\n        visitMode: '',\n        visitSigned: '',\n        visitTime: '',\n        projectDTOS: [],\n        projectId: '',\n        visitLatitude:'',\n        visitLongitude:'',\n      },\n      callLists: [{\n        name: '立项',\n        val: '1'\n      }, {\n        name: '报价',\n        val: '2'\n      }, {\n        name: '尽调',\n        val: '3'\n      }, {\n        name: '上会',\n        val: '4'\n      }, {\n        name: '签约',\n        val: '5'\n      },],\n      callList: [],\n      setIsType1: '0',//事件1关联的事件id\n      isType1D: {},\n      setIsType2: '0',//事件2关联的事件id\n      isType2D: {},\n      selectStartTime: false,\n      maxDate: new Date(),\n      minDate: '',\n      currentTime: new Date(),\n      upType: 1,//关联菜单标识\n      upIng: false,//回收数据通讯标识\n      uped: false,//回收数据态\n      pgList: [],\n      OTP:false,//当前打开该详情的状态\n      imgList:[],//上传图片\n    }\n  },\n  watch: {\n    isCDT(newV, oldV) {\n      this.form.userId = this.$store.getters.userInfo.id\n      this.form.userName = this.$store.getters.userInfo.name\n      let params = this.form\n      let txts = {\n        visitType:'拜访类型',\n        visitContent:'拜访内容',\n        visitMode:'拜访方式',\n        visitTime:'拜访时间',\n      } \n      if(!this.$checkFrom(params,txts)){return}\n      this.$emit('VisitChange', this.form)\n      return\n    }\n  },\n  mounted(){\n    let that = this            \n  },\n  updated(){\n    let container = document.getElementById('container')\n    if(container.children[0]){\n      container.children[0].childNodes[1].innerHTML = ''\n    }\n  },  \n  \n  created() { \n    const nowDate = new Date(new Date().toLocaleDateString()) // 获取当前时间\n    this.minDate = new Date(nowDate.getTime() - 2 * 24 * 60 * 60 * 1000)\n    if (this.$route.query.id) {\n      this.getVT(this.$route.query.id)\n      this.upType = 2,\n      this.OTP = this.$route.query.OTP==2||this.$route.query.OTP==1 ? true : false\n    }\n    this.getProjectList()\n    this.indexXY = this.$store.getters.indexXY\n  },\n  methods: {\n    update(e) {\n      let file = e.target.files[0]\n      let _this = this\n      let param = new FormData()\n      param.append('file', file)\n      let userData = this.$store.getters.userData\n      let fileName = userData.companyAbbreviation+'-'+userData.companyBusinessLicense+'-'+ formatDate(new Date(),'yyyyMMdd')\n      let config = {\n        headers: { 'Content-Type': 'multipart/form-data' }\n      }\n      upload(param, config)\n        .then(res => {\n          // console.log('上传文件', res.data,_this.$notifySty)\n          // console.log();\n          this.$notifySty('上传成功')\n          this.newFile = res.data.url\n          this.imgList.push(res.data.url)\n          this.imgList.length = this.imgList.length > 2 ?  2:this.imgList.length\n        })\n    },\n    mapObj(x,y){\n      txMap().then((qq) => {      \n      // console.log(qq)\n      const map = new qq.maps.Map(document.getElementById('container'), {\n        // 地图的中心地理坐标。\n        center: new qq.maps.LatLng(x,y),\n        zoom: 15,                       //设置缩放级别\n        draggable: false,               //设置是否可以拖拽\n        scrollwheel: false,             //设置是否可以滚动\n        disableDoubleClickZoom: true,    //设置是否可以双击放大\n        scaleControl: false,\n        mapTypeControlOptions: {\n          mapTypeIds: [\n          ],\n        },//置空地图类型        \n        zoomControl: false,  //设置是否可以缩放\n      })\n        var marker = new qq.maps.Marker({\n        //设置Marker的位置坐标\n        position: new qq.maps.LatLng(x,y),\n        //设置显示Marker的地图\n        map: map\n      })\n      })\n    },\n    //projectChange项目变更\n    projectChange() {\n      menuProject({ id: this.form.projectId }).then(res => {\n        this.callList = []\n        this.callLists.map((d, ) => {\n          res.data.map((dd, ) => {\n            if (d.val == dd) this.callList.push(d)\n          })\n        })\n        // this.form.projectId = res.data[0].information.projectName\n        console.log('projectChange项目变更', res)\n      })\n    },\n    //拜访方式变化\n    visitModeChange(itm){\n      if(itm=='现场'&&this.$route.query.OTP!=2){\n        console.log('run')\n        this.form.visitLongitude = this.$store.getters.indexXY.longitude\n        this.form.visitLatitude = this.$store.getters.indexXY.latitude\n        \n        this.mapObj(this.form.visitLatitude,this.form.visitLongitude)\n      }\n    },\n    //获取项目列表\n    getProjectList() {\n      const params = {\n        menuType: 1,\n        size:1000\n      }\n      projectList(params).then((res) => {\n        this.pgList = res.data\n        if(this.pgList.length>0){\n          this.form.projectId = this.pgList[0].id\n          this.projectChange()\n        }        \n      })\n    },\n    //触发关联菜单\n    setIsTypeChange(who) {\n      if (who == 1) {\n        this.isType1D.isSet = true\n      } else {\n        this.isType2D.isSet = true\n      }\n    },\n    //获取关联组件的返回值\n    constCallBack(e) {\n      console.log('获取关联组件的返回值',e)\n      this.form.projectDTOS[e.isNo - 1] = e\n      this.addVT()\n    },    \n    clickAdd() {\n      let params = this.form\n      let txts = {\n        visitType:'拜访类型',\n        visitContent:'拜访内容',\n        visitMode:'拜访方式',\n        visitTime:'拜访时间',\n      } \n      if(!this.$checkFrom(params,txts)){return}\n      this.upIng = !this.upIng\n      if (this.$route.query.id) {\n        this.putVT()\n      } else {\n        this.addVT()\n      }\n    },\n    addVT() {\n      const params = this.form\n      params.visitUserId = this.$store.getters.userInfo.id\n      if(this.isType1D.isSet||this.isType2D.isSet){\n        // console.log('this.form.projectDTOS',this.form.projectDTOS)\n        if(this.form.projectDTOS.length==0)return\n      }\n      addVisit(params).then((res) => {\n        this.$router.go(-1)\n      })\n    },\n    putVT() {\n      const params = this.form\n      params.visitUserId = this.$store.getters.userInfo.id\n      putVisit(params).then((res) => {\n        this.$router.go(-1)\n      })\n    },\n    getVT(id) {\n      getVisit({ id }).then((res) => {\n        this.form = res.data\n        console.log(this.form)\n        this.mapObj(this.form.visitLatitude,this.form.visitLongitude)\n      })\n    },\n    formatter(type, value) {\n      if (type === 'year') {\n        return `${value}年`\n      } if (type === 'month') {\n        return `${value}月`\n      }\n      return `${value}日`\n    },\n    startTimeClick() {\n      if(this.OTP) return\n      this.selectStartTime = true\n    },\n    startconfirm(e) {\n      // 选开始时间\n      if (isNull(e)) {\n        this.selectStartTime = false\n      } else {\n        const time = formatDate(new Date(e), 'yyyy-MM-dd', 'special')\n        const timeStr = time.split('-')\n        this.form.visitTime = ` ${timeStr[0]}-${timeStr[1]}-${timeStr[2]}`\n        this.selectStartTime = false\n      }\n    },\n  },\n}\n</script>\n<style lang=\"less\" scoped>\n\n.containers{\n  .callImg{\n    display: flex;\n    margin-top: 20px;\n    margin-left: 15px;\n    img{\n      margin : 0 5px;\n      flex:1;\n      width:100px;\n      height:100px;\n    }\n  }\n  #container{\n    a{\n      display: none !important;\n    }\n    img{\n      display: none !important;\n    }\n    .csssprite{\n      display: none !important;\n    }\n  }\n  width: 100%;\n  padding-bottom: 100px;\n  .select-map {\n    width: 100%;\n    padding: 0px 10px 0px 15px;\n    box-sizing: border-box;\n    .title-header {\n      width: 100%;\n      height: 40px;\n      display: flex;\n      line-height: 40px;\n      background-color: #fff;\n      color: #323233;\n      font-size: 14px;\n      overflow: hidden;\n      color: #323233;\n      font-size: 14px;\n      box-sizing: border-box;\n      padding-right: 15px;\n    }\n    .body {\n      width: 100%;\n      height: 240px;\n      background: #f4f4f4;\n    }\n    \n  }\n  .select-list {\n    width: 100%;\n    padding: 0px 0px 0px 15px;\n    box-sizing: border-box;\n    .addborder {\n      border-bottom: 1px solid #f5f6f8;\n    }\n    .list {\n      width: 100%;\n      height: 40px;\n      display: flex;\n      line-height: 40px;\n      background-color: #fff;\n      color: #323233;\n      font-size: 14px;\n      overflow: hidden;\n      color: #323233;\n      font-size: 14px;\n      box-sizing: border-box;\n      padding-right: 15px;\n      .left {\n        max-width: 90px;\n        height: 40px;\n      }\n      .right {\n        flex: 1;\n        height: 40px;\n        text-align: right;\n        select {\n          width: 100%;\n          height: 40px;\n          text-align: right;\n          border: none;\n          outline: none;\n          appearance: none;\n          -moz-appearance: none;\n          -webkit-appearance: none;\n          -ms-appearance: none;\n          direction: rtl;\n          text-indent: 5px;\n          background: #ffffff;\n        }\n      }\n    }\n    .saojiao {\n      width: 0;\n      height: 0;\n      border-width: 6px;\n      border-style: solid;\n      border-color: #323233 transparent transparent transparent;\n      margin-top: 17px;\n    }\n    .timeBox {\n      width: 25px;\n      height: 40px;\n      text-align: right;\n    }\n  }\n  .show-more {\n    width: 100%;\n    height: 40px;\n    line-height: 40px;\n    font-size: 12px;\n    color: #999999;\n    text-align: center;\n    .downIcon {\n      font-size: 8px;\n      position: relative;\n      left: 3px;\n      top: -1px;\n    }\n  }\n  .footer {\n    width: 100%;\n    height: 70px;\n    background: #fcfcfc;\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    padding: 0 10px;\n    box-sizing: border-box;\n  }\n}\n</style>\n<style lang=\"less\" >\n  .containers{\n    .uploadFile {\n      margin-top:20px;\n      width: 100px;\n      height: 100px;\n      border: 1px dashed #979797;\n      position: relative;\n      overflow: hidden;\n      margin-left: 15px;\n      .uploadIcon {\n        font-size: 30px;\n        position: absolute;\n        top: 15px;\n        left: 35px;\n        color: #979797;\n      }\n      .file{\n        z-index: 100;\n        opacity: 0;\n        height: 100%;\n      }\n      .uploadText {\n        width: 65px;\n        font-size: 16px;\n        position: absolute;\n        top: 50px;\n        left: 20px;\n        color: #979797;\n        z-index: 0;\n        \n      }\n    }\n  }\n  \n</style>"],"sourceRoot":"src/views/addVisit"}]}