{"remainingRequest":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/thread-loader/dist/cjs.js!/Users/wangzhanyuan/code/oc-works/fuli/node_modules/babel-loader/lib/index.js!/Users/wangzhanyuan/code/oc-works/fuli/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhanyuan/code/oc-works/fuli/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhanyuan/code/oc-works/fuli/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhanyuan/code/oc-works/fuli/src/App.vue","mtime":1564134165910},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.search\";\nimport \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es6.regexp.constructor\";\nimport _objectSpread from \"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\nimport { wxPermission, userInfo } from '@/service/login';\nimport { mapState, mapMutations } from 'vuex';\nimport { homeList, powerList, idPowerList } from '@/service/home';\nexport default {\n  data: function data() {\n    return {\n      userNo: '',\n      userId: null,\n      OTarrType: [true, true],\n      OTarrName: ['企业列表', '动态列表']\n    };\n  },\n  created: function created() {\n    // if(!window.sessionStorage.getItem('fristLogin')){\n    //   window.sessionStorage.setItem('fristLogin',true)\n    //   this.replace('/')\n    // }\n    if (window.location.hostname == 'localhost') {\n      //测试\n      this.userNo = '21313';\n      this.getUserInfo();\n    } else {\n      //正式\n      this.init();\n    }\n  },\n  methods: _objectSpread({}, mapMutations(['SET_USER_INFO']), {\n    init: function init() {\n      var _this = this;\n\n      wxPermission({\n        agentId: 7,\n        url: window.location.href // state:'YiGeShenChenman'\n\n      }).then(function (res) {\n        console.log('wxPermission登录1', res); //正式代码\n\n        _this.userNo = _this.GetQueryString('userNo');\n\n        if (_this.userNo) {\n          _this.getUserInfo();\n        } else {\n          //正式代码\n          window.location.href = res.data;\n        }\n      }).catch(function (err) {\n        return console.error(err);\n      });\n    },\n    getUserInfo: function getUserInfo() {\n      var _this2 = this;\n\n      userInfo({\n        userNo: this.userNo\n      }).then(function (res) {\n        console.log('获取用户信息getUserInfo', res);\n\n        _this2.SET_USER_INFO(res.data);\n\n        _this2.userId = res.data.id;\n\n        _this2.getIdPowerList();\n      });\n    },\n    GetQueryString: function GetQueryString(name) {\n      var reg = new RegExp(\"(^|&)\".concat(name, \"=([^&]*)(&|$)\"));\n      var r = window.location.search.substr(1).match(reg);\n      if (r != null) return unescape(r[2]);\n      return '';\n    },\n    // id获取权限\n    getIdPowerList: function getIdPowerList() {\n      var _this3 = this;\n\n      idPowerList({\n        id: this.userId\n      }).then(function (res) {\n        _this3.$store.commit('SET_LIST_POWER', res); // eslint-disable-next-line array-callback-return\n\n\n        _this3.OTarrName.map(function (d, idx) {\n          _this3.OTarrType[idx] = res.OTarr.indexOf(d) > -1;\n        });\n\n        console.log('getIdPowerList', _this3.OTarrType); ///获取权限\n\n        _this3.$store.commit('SET_HOME_POWER', _this3.OTarrType); // this.\n\n      });\n    }\n  })\n};",{"version":3,"sources":["App.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"app\">    \n    <router-view />\n  </div>\n</template>\n<script>\nimport { wxPermission, userInfo } from '@/service/login'\nimport { mapState, mapMutations } from 'vuex'\nimport { homeList, powerList, idPowerList,} from '@/service/home'\nexport default {\n  data() {\n    return {\n      userNo: '',\n      userId:null,\n      OTarrType: [true, true],\n      OTarrName: ['企业列表', '动态列表'],\n    }\n  },\n  created() {\n    // if(!window.sessionStorage.getItem('fristLogin')){\n    //   window.sessionStorage.setItem('fristLogin',true)\n    //   this.replace('/')\n    // }\n    if(window.location.hostname == 'localhost'){\n    //测试\n      this.userNo = '21313'\n      this.getUserInfo()\n    }else{\n      //正式\n      this.init()\n    }\n  },\n  methods: {\n    ...mapMutations(['SET_USER_INFO']),\n    init() {\n      wxPermission({\n        agentId: 7,\n        url: window.location.href,\n        // state:'YiGeShenChenman'\n      }).then((res) => {\n        console.log('wxPermission登录1',res)\n        //正式代码\n        this.userNo = this.GetQueryString('userNo')        \n        if (this.userNo) {          \n          this.getUserInfo()\n        } else {\n          //正式代码\n          window.location.href = res.data\n        }\n      })\n        .catch(err => console.error(err))\n    },\n    \n    getUserInfo() {\n      userInfo({ userNo: this.userNo }).then((res) => {\n        console.log('获取用户信息getUserInfo', res)\n        this.SET_USER_INFO(res.data)\n        this.userId = res.data.id\n        this.getIdPowerList()\n      })\n    },\n    GetQueryString(name) {\n      const reg = new RegExp(`(^|&)${name}=([^&]*)(&|$)`)\n      const r = window.location.search.substr(1).match(reg)\n      if (r != null) return unescape(r[2])\n      return ''\n    },\n        // id获取权限\n    getIdPowerList() {\n      idPowerList({ id: this.userId }).then((res) => {\n        \n        this.$store.commit('SET_LIST_POWER', res)\n        // eslint-disable-next-line array-callback-return\n        this.OTarrName.map((d, idx) => {\n          this.OTarrType[idx] = res.OTarr.indexOf(d) > -1\n        })\n        console.log('getIdPowerList',this.OTarrType)\n\n        ///获取权限\n        this.$store.commit('SET_HOME_POWER', this.OTarrType)\n        // this.\n      })\n    },\n  },\n}\n</script>\n"],"sourceRoot":"src"}]}