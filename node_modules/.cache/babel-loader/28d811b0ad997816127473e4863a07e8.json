{"remainingRequest":"/Users/wangzhanyuan/code/my-works/my-works-on/node_modules/babel-loader/lib/index.js!/Users/wangzhanyuan/code/my-works/my-works-on/src/service/home.js","dependencies":[{"path":"/Users/wangzhanyuan/code/my-works/my-works-on/src/service/home.js","mtime":1564627182436},{"path":"/Users/wangzhanyuan/code/my-works/my-works-on/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangzhanyuan/code/my-works/my-works-on/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.map\";\n\n/**\n * UPM-订单管理\n */\nimport { HttpGet, HttpPost, HttpPut, HttpDelete } from './index';\nimport { formatDate } from '@/utils/index'; // 订单相关\n\nvar apis = {\n  orderList: 'upm/order',\n  // 查询订单\n  distribute: 'upm/order/admin/distribute',\n  // 接口描述：行政派单（派给车队）接口\n  amount: 'upm/order/amount',\n  // 订单金额\n  importOrder: 'upm/employee/import',\n  // 导出订单\n  cancel: 'upm/order/cancel' //取消订单\n  // 查询订单\n\n};\nexport var getOrderList = function getOrderList(params) {\n  return HttpGet(apis.orderList, params).then(function (res) {\n    var date = new Date();\n    var t1 = formatDate(date, 'yyyy-MM-dd hh:mm:ss').slice(0, 9);\n    var t2 = date.getTime();\n\n    if (res.data.data) {\n      res.data.data.map(function (d) {\n        if (d.status == 3) {\n          var t3 = new Date(d.vehicleDay + ' ' + d.vehicleTime).getTime();\n\n          if (d.vehicleDay == t1 && t2 > t3) {\n            d.status = 7;\n          }\n        }\n\n        if (!d.price) {\n          d.price = 0.00;\n        }\n      });\n    } else {\n      res.data.data = [];\n    }\n\n    return res.data;\n  });\n}; // 行政派单\n\nexport var distribute = function distribute(params) {\n  return HttpPost(apis.distribute, params);\n}; // 导出订单\n\nexport var importOrder = function importOrder(params) {\n  return HttpPost(apis.importOrder, params);\n}; // 修改订单金额\n\nexport var amount = function amount(params) {\n  return HttpPut(apis.amount, params).then(function (res) {\n    return res.data;\n  });\n}; // 取消订单\n\nexport var cancel = function cancel(params) {\n  return HttpPut(apis.cancel, params);\n};",{"version":3,"sources":["/Users/wangzhanyuan/code/my-works/my-works-on/src/service/home.js"],"names":["HttpGet","HttpPost","HttpPut","HttpDelete","formatDate","apis","orderList","distribute","amount","importOrder","cancel","getOrderList","params","then","res","date","Date","t1","slice","t2","getTime","data","map","d","status","t3","vehicleDay","vehicleTime","price"],"mappings":";;AAAA;;;AAGA,SACEA,OADF,EAEEC,QAFF,EAGEC,OAHF,EAIEC,UAJF,QAKO,SALP;AAMA,SACEC,UADF,QAEO,eAFP,C,CAIA;;AACA,IAAMC,IAAI,GAAG;AACXC,EAAAA,SAAS,EAAE,WADA;AACa;AACxBC,EAAAA,UAAU,EAAE,4BAFD;AAE+B;AAC1CC,EAAAA,MAAM,EAAE,kBAHG;AAGiB;AAC5BC,EAAAA,WAAW,EAAE,qBAJF;AAIwB;AACnCC,EAAAA,MAAM,EAAC,kBALI,CAKe;AAG5B;;AARa,CAAb;AASA,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,MAAD;AAAA,SAAYZ,OAAO,CAACK,IAAI,CAACC,SAAN,EAAiBM,MAAjB,CAAP,CAAgCC,IAAhC,CAAqC,UAAAC,GAAG,EAAI;AAClF,QAAMC,IAAI,GAAG,IAAIC,IAAJ,EAAb;AACA,QAAMC,EAAE,GAAGb,UAAU,CAACW,IAAD,EAAO,qBAAP,CAAV,CAAwCG,KAAxC,CAA8C,CAA9C,EAAiD,CAAjD,CAAX;AACA,QAAMC,EAAE,GAAGJ,IAAI,CAACK,OAAL,EAAX;;AACA,QAAGN,GAAG,CAACO,IAAJ,CAASA,IAAZ,EAAiB;AACfP,MAAAA,GAAG,CAACO,IAAJ,CAASA,IAAT,CAAcC,GAAd,CAAkB,UAAAC,CAAC,EAAI;AACrB,YAAIA,CAAC,CAACC,MAAF,IAAY,CAAhB,EAAmB;AACjB,cAAMC,EAAE,GAAG,IAAIT,IAAJ,CAASO,CAAC,CAACG,UAAF,GAAe,GAAf,GAAqBH,CAAC,CAACI,WAAhC,EAA6CP,OAA7C,EAAX;;AACA,cAAIG,CAAC,CAACG,UAAF,IAAgBT,EAAhB,IAAsBE,EAAE,GAAGM,EAA/B,EAAmC;AACjCF,YAAAA,CAAC,CAACC,MAAF,GAAW,CAAX;AACD;AACF;;AACD,YAAI,CAACD,CAAC,CAACK,KAAP,EAAc;AACZL,UAAAA,CAAC,CAACK,KAAF,GAAU,IAAV;AACD;AACF,OAVD;AAWD,KAZD,MAYK;AACHd,MAAAA,GAAG,CAACO,IAAJ,CAASA,IAAT,GAAgB,EAAhB;AACD;;AAED,WAAOP,GAAG,CAACO,IAAX;AACD,GArBuC,CAAZ;AAAA,CAArB,C,CAsBP;;AACA,OAAO,IAAMd,UAAU,GAAG,SAAbA,UAAa,CAACK,MAAD;AAAA,SAAYX,QAAQ,CAACI,IAAI,CAACE,UAAN,EAAkBK,MAAlB,CAApB;AAAA,CAAnB,C,CACP;;AACA,OAAO,IAAMH,WAAW,GAAG,SAAdA,WAAc,CAACG,MAAD;AAAA,SAAYX,QAAQ,CAACI,IAAI,CAACI,WAAN,EAAmBG,MAAnB,CAApB;AAAA,CAApB,C,CACP;;AACA,OAAO,IAAMJ,MAAM,GAAG,SAATA,MAAS,CAACI,MAAD;AAAA,SAAYV,OAAO,CAACG,IAAI,CAACG,MAAN,EAAcI,MAAd,CAAP,CAA6BC,IAA7B,CAAkC,UAAAC,GAAG,EAAI;AACzE,WAAOA,GAAG,CAACO,IAAX;AACD,GAFiC,CAAZ;AAAA,CAAf,C,CAGP;;AACA,OAAO,IAAMX,MAAM,GAAG,SAATA,MAAS,CAACE,MAAD;AAAA,SAAYV,OAAO,CAACG,IAAI,CAACK,MAAN,EAAcE,MAAd,CAAnB;AAAA,CAAf","sourcesContent":["/**\n * UPM-订单管理\n */\nimport {\n  HttpGet,\n  HttpPost,\n  HttpPut,\n  HttpDelete\n} from './index'\nimport {\n  formatDate\n} from '@/utils/index'\n\n// 订单相关\nconst apis = {\n  orderList: 'upm/order', // 查询订单\n  distribute: 'upm/order/admin/distribute', // 接口描述：行政派单（派给车队）接口\n  amount: 'upm/order/amount', // 订单金额\n  importOrder: 'upm/employee/import',// 导出订单\n  cancel:'upm/order/cancel',//取消订单\n}\n\n// 查询订单\nexport const getOrderList = (params) => HttpGet(apis.orderList, params).then(res => {\n  const date = new Date()\n  const t1 = formatDate(date, 'yyyy-MM-dd hh:mm:ss').slice(0, 9)\n  const t2 = date.getTime()\n  if(res.data.data){\n    res.data.data.map(d => {\n      if (d.status == 3) {\n        const t3 = new Date(d.vehicleDay + ' ' + d.vehicleTime).getTime()\n        if (d.vehicleDay == t1 && t2 > t3) {\n          d.status = 7\n        }\n      }\n      if (!d.price) {\n        d.price = 0.00\n      }\n    })\n  }else{\n    res.data.data = []\n  }\n  \n  return res.data\n})\n// 行政派单\nexport const distribute = (params) => HttpPost(apis.distribute, params)\n// 导出订单\nexport const importOrder = (params) => HttpPost(apis.importOrder, params)\n// 修改订单金额\nexport const amount = (params) => HttpPut(apis.amount, params).then(res => {\n  return res.data\n})\n// 取消订单\nexport const cancel = (params) => HttpPut(apis.cancel, params)"]}]}