{"remainingRequest":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/babel-loader/lib/index.js!/Users/wangzhanyuan/code/oc-works/fuli/src/service/home.js","dependencies":[{"path":"/Users/wangzhanyuan/code/oc-works/fuli/src/service/home.js","mtime":1564134165913},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangzhanyuan/code/oc-works/fuli/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.sort\";\nimport { api } from './index';\nimport { format, formatDate } from '@/utils';\nimport store from '@/store'; // 引入store\n\nimport request from './request'; // home\n// 新增企业insert\n\nexport var insertFirm = function insertFirm(params) {\n  return api(request.insertFirm, 'POST', params);\n}; // 更新企业insert\n\nexport var updataFirm = function updataFirm(params) {\n  return api(request.updataFirm, 'PUT', params);\n}; // homeList 企业列表\n\nexport var homeList = function homeList(params) {\n  return api(request.homeList, 'GET', params).then(function (res) {\n    // console.log(res)\n    res.data = res.data || [];\n    return res;\n  });\n}; //GETCOM 企业列表\n\nexport var homeLists = function homeLists(params) {\n  return api(request.homeList, 'GETCOM', params).then(function (res) {\n    // console.log(res)\n    res.data = res.data || [];\n    res.data.data.map(function (d) {\n      d.dayed = null;\n\n      if (d.finalFollowUpTime) {\n        d.dayed = (new Date().getTime() - new Date(d.finalFollowUpTime).getTime()) / 60 / 60 / 24 / 1000; // console.log(typeof d.dayed)\n\n        d.dayed = d.dayed < 1 ? 1 : Math.ceil(d.dayed);\n      } //  console.log(d)\n\n    });\n    return res;\n  });\n}; // 动态列表\n\nexport var logList = function logList(params) {\n  return api(request.logList, 'GETLOG', params).then(function (res) {\n    // console.log('d.动态列表',res)\n    var UID = store.getters.userInfo.id + ''; // let UID = '1';\n\n    res.data.operationLogVOS = res.data.operationLogVOS ? res.data.operationLogVOS : [];\n    res.data.operationLogVOS.sort(function (a, b) {\n      return a - b;\n    });\n    res.data.operationLogVOS.map(function (d) {\n      d.isShow = true;\n      d.createTime = formatDate(new Date(d.createTime), 'yyyy-MM-dd hh:mm:ss');\n      d.messageTime = formatDate(new Date(d.messageTime), 'yyyy-MM-dd'); // console.log('d.browseUsers',d.browseUsers)\n\n      if (d.browseUsers) {\n        // console.log('d.browseUsers',UID,d.browseUsers.indexOf(UID))\n        d.isRead = d.browseUsers.indexOf(UID) > -1 ? true : false;\n      }\n\n      return d;\n    });\n    return res;\n  });\n}; // 指定id权限列表\n\nexport var idPowerList = function idPowerList(params) {\n  return api(request.idPowerList, 'GET', params).then(function (res) {\n    // console.log('getListPower', res)\n    res.data.PermissionVO = res.data.PermissionVO || [];\n    var OTarr = [];\n    var TTarr = []; // const oneArr = []\n    // const twoArr = []\n\n    var OAStr = [];\n    var TAStr = [];\n    var PermissionObj = {}; // eslint-disable-next-line array-callback-return\n\n    res.data.PermissionVO.map(function (d) {\n      if (d.level === 1) {\n        OAStr.push(d.name);\n      } else {\n        TAStr.push(d.name);\n      }\n\n      if (d.showH5) {\n        if (d.level === 1) {\n          OTarr.push(d.name);\n        } else {\n          TTarr.push(d.name);\n        }\n      }\n\n      PermissionObj[d.permissionEn] = d.permissionEn; //   console.log('name',d.name)\n    }); //  console.log('name',PermissionObj)\n\n    return {\n      OTarr: OTarr,\n      TTarr: TTarr,\n      OAStr: OAStr,\n      TAStr: TAStr,\n      PermissionObj: PermissionObj\n    };\n  });\n}; // 菜单权限列表\n\nexport var powerList = function powerList(params) {\n  return api('permission/list', 'GET', params).then(function (res) {\n    // console.log('getListPower', res)\n    var OTarr = [];\n    var TTarr = []; // const oneArr = []\n    // const twoArr = []\n\n    var OAStr = [];\n    var TAStr = []; // eslint-disable-next-line array-callback-return\n\n    res.data.map(function (d) {\n      if (d.level === 1) {\n        OAStr.push(d.name);\n      } else {\n        TAStr.push(d.name);\n      }\n\n      if (d.showH5) {\n        if (d.level === 1) {\n          OTarr.push(d.name);\n        } else {\n          TTarr.push(d.name);\n        }\n      } //   console.log('name',d.name)\n\n    });\n    return {\n      OTarr: OTarr,\n      TTarr: TTarr,\n      OAStr: OAStr,\n      TAStr: TAStr\n    };\n  });\n}; // 所有菜单列表\n\nexport var allPowerList = function allPowerList(params) {\n  return api('permission/list', 'GET', params);\n};",{"version":3,"sources":["/Users/wangzhanyuan/code/oc-works/fuli/src/service/home.js"],"names":["api","format","formatDate","store","request","insertFirm","params","updataFirm","homeList","then","res","data","homeLists","map","d","dayed","finalFollowUpTime","Date","getTime","Math","ceil","logList","UID","getters","userInfo","id","operationLogVOS","sort","a","b","isShow","createTime","messageTime","browseUsers","isRead","indexOf","idPowerList","PermissionVO","OTarr","TTarr","OAStr","TAStr","PermissionObj","level","push","name","showH5","permissionEn","powerList","allPowerList"],"mappings":"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","sourcesContent":["import {\n  api,\n} from './index'\nimport { format,formatDate } from '@/utils'\nimport store from '@/store' // 引入store\nimport request from './request'\n// home\n// 新增企业insert\nexport const insertFirm = params => api(request.insertFirm, 'POST', params)\n// 更新企业insert\nexport const updataFirm = params => api(request.updataFirm, 'PUT', params)\n// homeList 企业列表\nexport const homeList = params => api(request.homeList, 'GET', params).then(res=>{\n  // console.log(res)\n  res.data = res.data||[]\n  \n  return res\n})\n//GETCOM 企业列表\nexport const homeLists = params => api(request.homeList, 'GETCOM', params).then(res=>{\n  // console.log(res)\n  res.data = res.data||[]\n  res.data.data.map(d=>{\n    d.dayed = null\n   if(d.finalFollowUpTime) {\n    d.dayed = (new Date().getTime() - new Date(d.finalFollowUpTime).getTime())/60/60/24/1000\n    // console.log(typeof d.dayed)\n    d.dayed = d.dayed<1 ? 1:Math.ceil(d.dayed)\n    \n   }\n  //  console.log(d)\n  })\n  return res\n})\n// 动态列表\nexport const logList = params => api(request.logList, 'GETLOG', params).then((res) => {\n  // console.log('d.动态列表',res)\n  let UID = store.getters.userInfo.id+''\n  // let UID = '1';\n  res.data.operationLogVOS = res.data.operationLogVOS ? res.data.operationLogVOS : []\n  res.data.operationLogVOS.sort((a, b) => a - b)\n  res.data.operationLogVOS.map((d) => {\n    d.isShow = true\n    d.createTime = formatDate(new Date(d.createTime) ,'yyyy-MM-dd hh:mm:ss')\n    d.messageTime = formatDate(new Date(d.messageTime),'yyyy-MM-dd')\n    // console.log('d.browseUsers',d.browseUsers)\n    if(d.browseUsers){\n      // console.log('d.browseUsers',UID,d.browseUsers.indexOf(UID))\n      d.isRead = d.browseUsers.indexOf(UID) > -1 ? true : false\n    }        \n    return d\n  })\n\n  return res\n})\n\n// 指定id权限列表\nexport const idPowerList = params => api(request.idPowerList, 'GET', params).then((res) => {\n  // console.log('getListPower', res)\n  res.data.PermissionVO = res.data.PermissionVO || []\n  const OTarr = []\n  const TTarr = []\n  // const oneArr = []\n  // const twoArr = []\n  const OAStr = []\n  const TAStr = []\n\n  const PermissionObj={}\n\n  // eslint-disable-next-line array-callback-return\n  res.data.PermissionVO.map((d) => {\n    if (d.level === 1) {\n      OAStr.push(d.name)\n    } else {\n      TAStr.push(d.name)\n    }\n    if (d.showH5) {\n      if (d.level === 1) {\n        OTarr.push(d.name)\n      } else {\n        TTarr.push(d.name)\n      }\n    }\n    PermissionObj[d.permissionEn] = d.permissionEn\n    //   console.log('name',d.name)\n  })\n  //  console.log('name',PermissionObj)\n  return {\n    OTarr,\n    TTarr,\n    OAStr,\n    TAStr,\n    PermissionObj\n  }\n})\n\n// 菜单权限列表\nexport const powerList = params => api('permission/list', 'GET', params).then((res) => {\n  // console.log('getListPower', res)\n  const OTarr = []\n  const TTarr = []\n  // const oneArr = []\n  // const twoArr = []\n  const OAStr = []\n  const TAStr = []\n\n  // eslint-disable-next-line array-callback-return\n  res.data.map((d) => {\n    if (d.level === 1) {\n      OAStr.push(d.name)\n    } else {\n      TAStr.push(d.name)\n    }\n    if (d.showH5) {\n      if (d.level === 1) {\n        OTarr.push(d.name)\n      } else {\n        TTarr.push(d.name)\n      }\n    }\n    //   console.log('name',d.name)\n  })\n\n  return {\n    OTarr,\n    TTarr,\n    OAStr,\n    TAStr,\n  }\n})\n\n// 所有菜单列表\nexport const allPowerList = params => api('permission/list', 'GET', params)\n"]}]}